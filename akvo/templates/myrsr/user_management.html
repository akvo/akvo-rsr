{% extends "myrsr/myrsr_base.html" %}

{% load bootstrap3 compressed i18n rules %}

{% block title %}{% trans 'MyRSR - My updates' %}{% endblock %}

{% block myrsr_main %}
    <h3>User management</h3>
    {% has_perm 'rsr.change_employment' user as can_change_employments %}
    {% if not can_change_employments %}
    <p class="noItem text-center verticalPadding col-sm-6 col-sm-offset-3">
        {% trans "You don't have the rights to manage users." %}
    </p>
    {% else %}
        <div class="col-sm-12">
            <form class="navbar-form" role="search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search" name="q" id="search" {% if q %}value="{{q}}"{% endif %}>
                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="glyphicon glyphicon-search"></i>
                    </button>
                </div>
            </div>
            </form>
        </div>
        {% if user_data %}
        <div id="user_table" class="col-sm-12"></div>
        <div>
          <p>Viewing {{ page.start_index }} - {{ page.end_index }} of {{ paginator.count }} users</p>
          {% include 'navigation/pagination.html' %}
        </div>
        {% else %}
        <p class="noItem text-center verticalPadding col-sm-6 col-sm-offset-3">
            {% if q %}
                {% trans "Your search" %} - <strong>{{q}}</strong> - {% trans "did not match any users." %}
            {% else %}
                {% trans "No users that you can manage." %}
            {% endif %}
        </p>
        {% endif %}
    {% endif %}
{% endblock %}

{% block js %}
    {{ block.super }}

    {% if user_data %}
    {# App data #}
    <script type="application/json" id="initial-data">{{ user_data|safe }}</script>

    {% compressed_js 'my_user_management' %}
    {% endif %}
{% endblock js %}
