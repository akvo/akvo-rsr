/*
 * Galleria v 1.1.95 2010-08-06
 * http://galleria.aino.se
 *
 * Copyright (c) 2010, Aino
 * Licensed under the MIT license.
 */
(function(){var e=false,h=/xyz/.test(function(){xyz;})?/\b__super\b/:/.*/,b=function(){},g=this;b.extend=function(n){var m=this.prototype;e=true;var l=new this();e=false;for(var k in n){if(k){l[k]=typeof n[k]=="function"&&typeof m[k]=="function"&&h.test(n[k])?(function(o,p){return function(){var r=this.__super;this.__super=m[o];var q=p.apply(this,arguments);this.__super=r;return q;};})(k,n[k]):n[k];}}function j(){if(!e&&this.__constructor){this.__constructor.apply(this,arguments);}}j.prototype=l;j.constructor=j;j.extend=arguments.callee;return j;};var f=b.extend({loop:function(l,k){var j=this;if(typeof l=="number"){l=new Array(l);}jQuery.each(l,function(){k.call(j,arguments[1],arguments[0]);});return l;},create:function(l,k){l=l||"div";var j=document.createElement(l);if(k){j.className=k;}return j;},getElements:function(j){var k={};this.loop(jQuery(j),this.proxy(function(l){this.push(l,k);}));return k;},setStyle:function(k,j){jQuery(k).css(j);return this;},getStyle:function(k,j,m){var l=jQuery(k).css(j);return m?this.parseValue(l):l;},cssText:function(j){var l=document.createElement("style");this.getElements("head")[0].appendChild(l);if(l.styleSheet){l.styleSheet.cssText=j;}else{var k=document.createTextNode(j);l.appendChild(k);}return this;},touch:function(l){var k=l.nextSibling;var j=l.parentNode;j.removeChild(l);if(k){j.insertBefore(l,k);}else{j.appendChild(l);}if(l.styleSheet&&l.styleSheet.imports.length){this.loop(l.styleSheet.imports,function(m){l.styleSheet.addImport(m.href);});}},loadCSS:function(j,m){var l=this.getElements('link[href="'+j+'"]').length;if(l){m.call(null);return l[0];}var k=this.create("link");k.rel="stylesheet";k.href=j;if(typeof m=="function"){this.wait(function(){return !!document.body;},function(){var n=this.create("div","galleria-container galleria-stage");this.moveOut(n);document.body.appendChild(n);var o=this.proxy(function(){var r="";var q;if(document.defaultView&&document.defaultView.getComputedStyle){q=document.defaultView.getComputedStyle(n,"");this.loop(q,function(s){r+=s+q.getPropertyValue(s);});}else{if(n.currentStyle){q=n.currentStyle;this.loop(q,function(s,t){r+=t+s;});}}return r;});var p=o();this.wait(function(){return o()!==p;},function(){document.body.removeChild(n);m.call(k);},function(){i.raise("Could not confirm theme CSS");},2000);});}g.setTimeout(this.proxy(function(){var n=this.getElements('link[rel="stylesheet"],style');if(n.length){n[0].parentNode.insertBefore(k,n[0]);}else{this.getElements("head")[0].appendChild(k);}if(i.IE){this.loop(n,function(o){this.touch(o);});}}),2);return k;},moveOut:function(j){return this.setStyle(j,{position:"absolute",left:"-10000px",display:"block"});},moveIn:function(j){return this.setStyle(j,{left:"0"});},reveal:function(j){return jQuery(j).show();},hide:function(j){return jQuery(j).hide();},mix:function(){return jQuery.extend.apply(jQuery,arguments);},proxy:function(k,j){if(typeof k!=="function"){return function(){};}j=j||this;return function(){return k.apply(j,Array.prototype.slice.call(arguments));};},listen:function(l,k,j){jQuery(l).bind(k,j);},forget:function(l,k,j){jQuery(l).unbind(k,j);},dispatch:function(k,j){jQuery(k).trigger(j);},clone:function(k,j){j=j||false;return jQuery(k).clone(j)[0];},removeAttr:function(k,j){this.loop(j.split(" "),function(l){jQuery(k).removeAttr(l);});},push:function(j,k){if(typeof k.length=="undefined"){k.length=0;}Array.prototype.push.call(k,j);return j;},width:function(k,j){return this.meassure(k,j,"Width");},height:function(k,j){return this.meassure(k,j,"Height");},meassure:function(l,k,o){var m=jQuery(l);var j=k?m["outer"+o](true):m[o.toLowerCase()]();if(i.QUIRK){var n=o=="Width"?["left","right"]:["top","bottom"];this.loop(n,function(p){j+=m.css("border-"+p+"-width").replace(/[^\d]/g,"")*1;j+=m.css("padding-"+p).replace(/[^\d]/g,"")*1;});}return j;},toggleClass:function(m,l,j){if(typeof j!=="undefined"){var k=j?"addClass":"removeClass";jQuery(m)[k](l);return this;}jQuery(m).toggleClass(l);return this;},hideAll:function(j){jQuery(j).find("*").hide();},animate:function(k,j){j.complete=this.proxy(j.complete);var l=jQuery(k);if(!l.length){return;}if(j.from){l.css(from);}l.animate(j.to,{duration:j.duration||400,complete:j.complete,easing:j.easing||"swing"});},wait:function(k,n,m,j){k=this.proxy(k);n=this.proxy(n);m=this.proxy(m);var l=new Date().getTime()+(j||3000);g.setTimeout(function(){if(k()){n();return false;}if(new Date().getTime()>=l){m();n();return false;}g.setTimeout(arguments.callee,2);},2);return this;},loadScript:function(l,o){var k=document.createElement("script");k.src=l;k.async=true;var j=false;var n=this;k.onload=k.onreadystatechange=function(){if(!j&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){j=true;if(typeof o=="function"){o.call(n,this);}k.onload=k.onreadystatechange=null;}};var m=document.getElementsByTagName("script")[0];m.parentNode.insertBefore(k,m);return this;},parseValue:function(k){if(typeof k=="number"){return k;}else{if(typeof k=="string"){var j=k.match(/\-?\d/g);return j&&j.constructor==Array?j.join("")*1:0;}else{return 0;}}}});var c=f.extend({__constructor:function(j){this.image=null;this.elem=this.create("div","galleria-image");this.setStyle(this.elem,{overflow:"hidden",position:"relative"});this.order=j;this.orig={w:0,h:0,r:1};},cache:{},ready:false,add:function(k){if(this.cache[k]){return this.cache[k];}var j=new Image();j.src=k;this.setStyle(j,{display:"block"});if(j.complete&&j.width){this.cache[k]=j;return j;}j.onload=(function(l){return function(){l.cache[k]=j;};})(this);return j;},isCached:function(j){return this.cache[j]?this.cache[j].complete:false;},make:function(k){var j=this.cache[k]||this.add(k);return this.clone(j);},load:function(j,k){k=this.proxy(k);this.elem.innerHTML="";this.image=this.make(j);this.moveOut(this.image);this.elem.appendChild(this.image);this.wait(function(){return(this.image.complete&&this.image.width);},function(){this.orig={h:this.h||this.image.height,w:this.w||this.image.width};k({target:this.image,scope:this});},function(){i.raise("image not loaded in 20 seconds: "+j);},20000);return this;},scale:function(k){var m=this.mix({width:0,height:0,min:undefined,max:undefined,margin:0,complete:function(){},position:"center",crop:false},k);if(!this.image){return this;}var l,j;this.wait(function(){l=m.width||this.width(this.elem);j=m.height||this.height(this.elem);return l&&j;},function(){var n=(l-m.margin*2)/this.orig.w;var q=(j-m.margin*2)/this.orig.h;var s={"true":Math.max(n,q),width:n,height:q,"false":Math.min(n,q)};var p=s[m.crop.toString()];if(m.max){p=Math.min(m.max,p);}if(m.min){p=Math.max(m.min,p);}this.setStyle(this.elem,{width:l,height:j});this.image.width=Math.ceil(this.orig.w*p);this.image.height=Math.ceil(this.orig.h*p);var r=this.proxy(function(y,x,w){var v=0;if(/\%/.test(y)){var z=parseInt(y)/100;v=Math.ceil(this.image[x]*-1*z+w*z);}else{v=parseInt(y);}return v;});var t={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};var u={};var o={};this.loop(m.position.toLowerCase().split(" "),function(w,v){if(w=="center"){w="50%";}u[v?"top":"left"]=w;});this.loop(u,function(w,v){if(t.hasOwnProperty(w)){o=this.mix(o,t[w]);}});u=u.top?this.mix(u,o):o;u=this.mix({top:"50%",left:"50%"},u);this.setStyle(this.image,{position:"relative",top:r(u.top,"height",j),left:r(u.left,"width",l)});this.ready=true;m.complete.call(this);});return this;}});var i=g.Galleria=f.extend({__constructor:function(l){this.theme=undefined;this.options=l;this.playing=false;this.playtime=5000;this.active=null;this.queue={};this.data={};this.dom={};var n=this.keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8},map:{},bound:false,press:this.proxy(function(q){var p=q.keyCode||q.which;if(n.map[p]&&typeof n.map[p]=="function"){n.map[p].call(this,q);}}),attach:this.proxy(function(r){for(var q in r){var p=q.toUpperCase();if(n.keys[p]){n.map[n.keys[p]]=r[q];}}if(!n.bound){n.bound=true;this.listen(document,"keydown",n.press);}}),detach:this.proxy(function(){n.bound=false;this.forget(document,"keydown",n.press);})};this.timeouts={trunk:{},add:function(u,t,s,q){q=q||false;this.clear(u);if(q){var r=this;var p=t;t=function(){p();r.add(u,t,s);};}this.trunk[u]=g.setTimeout(t,s);},clear:function(q){if(q&&this.trunk[q]){g.clearTimeout(this.trunk[q]);delete this.trunk[q];}else{if(typeof q=="undefined"){for(var p in this.trunk){g.clearTimeout(this.trunk[p]);delete this.trunk[p];}}}}};this.controls={0:null,1:null,active:0,swap:function(){this.active=this.active?0:1;},getActive:function(){return this[this.active];},getNext:function(){return this[Math.abs(this.active-1)];}};var j=this.fullscreen={scrolled:0,enter:this.proxy(function(){this.toggleClass(this.get("container"),"fullscreen");j.scrolled=jQuery(g).scrollTop();this.loop(j.getElements(),function(r,q){j.styles[q]=r.getAttribute("style");r.removeAttribute("style");});this.setStyle(j.getElements(0),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:10000});var p={height:"100%",overflow:"hidden",margin:0,padding:0};this.setStyle(j.getElements(1),p);this.setStyle(j.getElements(2),p);this.attachKeyboard({escape:this.exitFullscreen,right:this.next,left:this.prev});this.rescale(this.proxy(function(){this.trigger(i.FULLSCREEN_ENTER);}));this.listen(g,"resize",j.scale);}),scale:this.proxy(function(){this.rescale();}),exit:this.proxy(function(){this.toggleClass(this.get("container"),"fullscreen",false);if(!j.styles.length){return;}this.loop(j.getElements(),function(q,p){q.removeAttribute("style");q.setAttribute("style",j.styles[p]);});g.scrollTo(0,j.scrolled);this.detachKeyboard();this.rescale(this.proxy(function(){this.trigger(i.FULLSCREEN_EXIT);}));this.forget(g,"resize",j.scale);}),styles:[],getElements:this.proxy(function(q){var p=[this.get("container"),document.body,this.getElements("html")[0]];return q?p[q]:p;})};var m=this.idle={trunk:[],bound:false,add:this.proxy(function(s,r,q){if(!s){return;}if(!m.bound){m.addEvent();}s=jQuery(s);var t={};for(var p in r){t[p]=s.css(p);}s.data("idle",{from:t,to:r,complete:true,busy:false,fn:this.proxy(q)});m.addTimer();m.trunk.push(s);}),remove:this.proxy(function(p){p=jQuery(p);this.loop(m.trunk,function(r,q){if(r&&!r.not(p).length){m.show(p);m.trunk.splice(q,1);}});if(!m.trunk.length){m.removeEvent();this.clearTimer("idle");}}),addEvent:this.proxy(function(){m.bound=true;this.listen(this.get("container"),"mousemove click",m.showAll);}),removeEvent:this.proxy(function(){m.bound=false;this.forget(this.get("container"),"mousemove click",m.showAll);}),addTimer:this.proxy(function(){this.addTimer("idle",this.proxy(function(){m.hide();}),this.options.idle_time);}),hide:this.proxy(function(){this.trigger(i.IDLE_ENTER);this.loop(m.trunk,function(p){var q=p.data("idle");q.complete=false;q.fn();p.animate(q.to,{duration:600,queue:false,easing:"swing"});});}),showAll:this.proxy(function(){this.clearTimer("idle");this.loop(m.trunk,function(p){m.show(p);});}),show:this.proxy(function(p){var q=p.data("idle");if(!q.busy&&!q.complete){q.busy=true;this.trigger(i.IDLE_EXIT);p.animate(q.from,{duration:300,queue:false,easing:"swing",complete:function(){$(this).data("idle").busy=false;$(this).data("idle").complete=true;}});}m.addTimer();})};var o=this.lightbox={w:0,h:0,initialized:false,active:null,init:this.proxy(function(){if(o.initialized){return;}o.initialized=true;var p="lightbox-overlay lightbox-box lightbox-content lightbox-shadow lightbox-title lightbox-info lightbox-close lightbox-prev lightbox-next lightbox-counter";this.loop(p.split(" "),function(q){this.addElement(q);o[q.split("-")[1]]=this.get(q);});o.image=new Galleria.Picture();this.append({"lightbox-box":["lightbox-shadow","lightbox-content","lightbox-close"],"lightbox-info":["lightbox-title","lightbox-counter","lightbox-next","lightbox-prev"],"lightbox-content":["lightbox-info"]});document.body.appendChild(o.overlay);document.body.appendChild(o.box);o.content.appendChild(o.image.elem);o.close.innerHTML="&#215;";o.prev.innerHTML="&#9668;";o.next.innerHTML="&#9658;";this.listen(o.close,"click",o.hide);this.listen(o.overlay,"click",o.hide);this.listen(o.next,"click",o.showNext);this.listen(o.prev,"click",o.showPrev);if(this.options.lightbox_clicknext){this.setStyle(o.image.elem,{cursor:"pointer"});this.listen(o.image.elem,"click",o.showNext);}this.setStyle(o.overlay,{position:"fixed",display:"none",opacity:this.options.overlay_opacity,top:0,left:0,width:"100%",height:"100%",background:this.options.overlay_background,zIndex:99990});this.setStyle(o.box,{position:"fixed",display:"none",width:400,height:400,top:"50%",left:"50%",marginTop:-200,marginLeft:-200,zIndex:99991});this.setStyle(o.shadow,{background:"#000",opacity:0.4,width:"100%",height:"100%",position:"absolute"});this.setStyle(o.content,{backgroundColor:"#fff",position:"absolute",top:10,left:10,right:10,bottom:10,overflow:"hidden"});this.setStyle(o.info,{color:"#444",fontSize:"11px",fontFamily:"arial,sans-serif",height:13,lineHeight:"13px",position:"absolute",bottom:10,left:10,right:10,opacity:0});this.setStyle(o.close,{background:"#fff",height:20,width:20,position:"absolute",textAlign:"center",cursor:"pointer",top:10,right:10,lineHeight:"22px",fontSize:"16px",fontFamily:"arial,sans-serif",color:"#444",zIndex:99999});this.setStyle(o.image.elem,{top:10,left:10,right:10,bottom:30,position:"absolute"});this.loop("title prev next counter".split(" "),function(r){var q={display:"inline","float":"left"};if(r!="title"){this.mix(q,{"float":"right"});if(r!="counter"){this.mix(q,{cursor:"pointer"});}else{this.mix(q,{marginLeft:8});}}this.setStyle(o[r],q);});this.loop("prev next close".split(" "),function(q){this.listen(o[q],"mouseover",this.proxy(function(){this.setStyle(o[q],{color:"#000"});}));this.listen(o[q],"mouseout",this.proxy(function(){this.setStyle(o[q],{color:"#444"});}));});this.trigger(i.LIGHTBOX_OPEN);}),rescale:this.proxy(function(x){var p=Math.min(this.width(g),o.w);var t=Math.min(this.height(g),o.h);var u=Math.min((p-60)/o.w,(t-80)/o.h);var s=(o.w*u)+40;var v=(o.h*u)+60;var q={width:s,height:v,marginTop:Math.ceil(v/2)*-1,marginLeft:Math.ceil(s)/2*-1};if(!x){this.animate(o.box,{to:q,duration:this.options.lightbox_transition_speed,easing:"galleria",complete:function(){this.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:o.image.image});this.moveIn(o.image.image);this.animate(o.image.image,{to:{opacity:1},duration:this.options.lightbox_fade_speed});this.animate(o.info,{to:{opacity:1},duration:this.options.lightbox_fade_speed});}});}else{this.setStyle(o.box,q);}}),hide:this.proxy(function(){o.image.image=null;this.forget(g,"resize",o.rescale);this.hide(o.box);this.setStyle(o.info,{opacity:0});this.animate(o.overlay,{to:{opacity:0},duration:200,complete:function(){this.hide(o.overlay);this.setStyle(o.overlay,{opacity:this.options.overlay_opacity});this.trigger(i.LIGHTBOX_CLOSE);}});}),showNext:this.proxy(function(){o.show(this.getNext(o.active));}),showPrev:this.proxy(function(){o.show(this.getPrev(o.active));}),show:this.proxy(function(p){if(!o.initialized){o.init();}this.forget(g,"resize",o.rescale);p=typeof p=="number"?p:this.getIndex();o.active=p;var r=this.getData(p);var q=this.data.length;this.setStyle(o.info,{opacity:0});o.image.load(r.image,function(s){o.w=s.scope.orig.w;o.h=s.scope.orig.h;this.setStyle(s.target,{width:"100.5%",height:"100.5%",top:0,zIndex:99998,opacity:0});o.title.innerHTML=r.title;o.counter.innerHTML=(p+1)+" / "+q;this.listen(g,"resize",o.rescale);o.rescale();});this.reveal(o.overlay);this.reveal(o.box);})};this.thumbnails={width:0};this.stageWidth=0;this.stageHeight=0;var k="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description info-author thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter";k=k.split(" ");this.loop(k,function(p){this.dom[p]=this.create("div","galleria-"+p);});this.target=this.dom.target=l.target.nodeName?l.target:this.getElements(l.target)[0];if(!this.target){i.raise("Target not found.");}},init:function(){this.options=this.mix(i.theme.defaults,this.options);this.options=this.mix({autoplay:false,carousel:true,carousel_follow:true,carousel_speed:400,carousel_steps:"auto",clicknext:false,data_config:function(k){return{};},data_image_selector:"img",data_source:this.target,data_type:"auto",debug:false,extend:function(k){},height:"auto",idle_time:3000,image_crop:false,image_margin:0,image_pan:false,image_pan_smoothness:12,image_position:"50%",keep_source:false,lightbox_clicknext:true,lightbox_fade_speed:200,lightbox_transition_speed:300,link_source_images:true,max_scale_ratio:undefined,min_scale_ratio:undefined,on_image:function(l,k){},overlay_opacity:0.85,overlay_background:"#0b0b0b",popup_links:false,preload:2,queue:true,show:0,show_info:true,show_counter:true,show_imagenav:true,thumb_crop:true,thumb_fit:true,thumb_margin:0,thumb_quality:"auto",thumbnails:true,transition:i.transitions.fade,transition_speed:400},this.options);var j=this.options;this.bind(i.DATA,function(){this.run();});if(j.clicknext){this.loop(this.data,function(k){delete k.link;});this.setStyle(this.get("stage"),{cursor:"pointer"});this.listen(this.get("stage"),"click",this.proxy(function(){this.next();}));}this.bind(i.IMAGE,function(k){j.on_image.call(this,k.imageTarget,k.thumbTarget);});this.bind(i.READY,function(){if(i.History){i.History.change(this.proxy(function(k){var l=parseInt(k.value.replace(/\//,""));if(isNaN(l)){g.history.go(-1);}else{this.show(l,undefined,true);}}));}i.theme.init.call(this,j);j.extend.call(this,j);if(/^[0-9]{1,4}$/.test(d)&&i.History){this.show(d,undefined,true);}else{if(typeof j.show=="number"){this.show(j.show);}}if(j.autoplay){if(typeof j.autoplay=="number"){this.playtime=j.autoplay;}this.trigger(i.PLAY);this.playing=true;}});this.load();return this;},bind:function(k,j){this.listen(this.get("container"),k,this.proxy(j));return this;},unbind:function(j){this.forget(this.get("container"),j);},trigger:function(j){j=typeof j=="object"?this.mix(j,{scope:this}):{type:j,scope:this};this.dispatch(this.get("container"),j);return this;},addIdleState:function(){this.idle.add.apply(this,arguments);return this;},removeIdleState:function(){this.idle.remove.apply(this,arguments);return this;},enterIdleMode:function(){this.idle.hide();return this;},exitIdleMode:function(){this.idle.show();return this;},addTimer:function(){this.timeouts.add.apply(this.timeouts,arguments);return this;},clearTimer:function(){this.timeouts.clear.apply(this.timeouts,arguments);return this;},enterFullscreen:function(){this.fullscreen.enter.apply(this,arguments);return this;},exitFullscreen:function(){this.fullscreen.exit.apply(this,arguments);return this;},openLightbox:function(){this.lightbox.show.apply(this,arguments);},closeLightbox:function(){this.lightbox.hide.apply(this,arguments);},getActive:function(){return this.controls.getActive();},getActiveImage:function(){return this.getActive().image||null;},run:function(){var q=this.options;if(!this.data.length){i.raise("Data is empty.");}if(!q.keep_source&&!Galleria.IE){this.target.innerHTML="";}this.loop(2,function(){var o=new c();this.setStyle(o.elem,{position:"absolute",top:0,left:0});this.setStyle(this.get("images"),{position:"relative",top:0,left:0,width:"100%",height:"100%"});this.get("images").appendChild(o.elem);this.push(o,this.controls);},this);if(q.carousel){this.bind(i.THUMBNAIL,this.parseCarousel);}this.build();this.target.appendChild(this.get("container"));this.loop(["info","counter","image-nav"],function(o){if(q["show_"+o.replace(/-/,"")]===false){this.moveOut(this.get(o));}});var j=0;var n=0;for(var l=0;this.data[l];l++){var k;if(q.thumbnails===true){k=new c(l);var p=this.data[l].thumb||this.data[l].image;this.get("thumbnails").appendChild(k.elem);j=this.getStyle(k.elem,"width",true);n=this.getStyle(k.elem,"height",true);if(q.thumb_fit&&q.thum_crop!==true){this.setStyle(k.elem,{width:0,height:0});}k.load(p,this.proxy(function(o){var r=o.target.width;o.scope.scale({width:j,height:n,crop:q.thumb_crop,margin:q.thumb_margin,complete:this.proxy(function(){var t=["left","top"];var s=["Height","Width"];this.loop(s,function(u,w){if((!q.thumb_crop||q.thumb_crop==u.toLowerCase())&&q.thumb_fit){var v={};var x=s[Math.abs(w-1)].toLowerCase();v[x]=o.target[x];this.setStyle(o.target.parentNode,v);var v={};v[t[w]]=0;this.setStyle(o.target,v);}o.scope["outer"+u]=this[u.toLowerCase()](o.target.parentNode,true);});this.toggleQuality(o.target,q.thumb_quality===true||(q.thumb_quality=="auto"&&r<o.target.width*3));this.trigger({type:i.THUMBNAIL,thumbTarget:o.target,thumbOrder:o.scope.order});})});}));if(q.preload=="all"){k.add(this.data[l].image);}}else{if(q.thumbnails=="empty"){k={elem:this.create("div","galleria-image"),image:this.create("span","img")};k.elem.appendChild(k.image);this.get("thumbnails").appendChild(k.elem);}else{k={elem:false,image:false};}}var m=this.proxy(function(r){this.pause();r.preventDefault();var o=r.currentTarget.rel;if(this.active!==o){this.show(o);}});if(q.thumbnails!==false){k.elem.rel=l;this.listen(k.elem,"click",m);}if(q.link_source_images&&q.keep_source&&this.data[l].elem){this.data[l].elem.rel=l;this.listen(this.data[l].elem,"click",m);}this.push(k,this.thumbnails);}this.setStyle(this.get("thumbnails"),{opacity:0});if(q.height&&q.height!="auto"){this.setStyle(this.get("container"),{height:q.height});}this.wait(function(){var o=this.getStyle(this.get("container"),"height",true);this.stageWidth=this.width(this.get("stage"));this.stageHeight=this.height(this.get("stage"));if(this.stageHeight<50&&q.height=="auto"){this.setStyle(this.get("container"),{height:Math.round(this.stageWidth*9/16)});this.stageHeight=this.height(this.get("stage"));}return this.stageHeight&&this.stageWidth;},function(){this.listen(this.get("image-nav-right"),"click",this.proxy(function(o){if(q.clicknext){o.stopPropagation();}this.pause();this.next();}));this.listen(this.get("image-nav-left"),"click",this.proxy(function(o){if(q.clicknext){o.stopPropagation();}this.pause();this.prev();}));this.setStyle(this.get("thumbnails"),{opacity:1});this.trigger(i.READY);},function(){i.raise("Galleria could not load properly. Make sure stage has a height and width.");},5000);},mousePosition:function(j){return{x:j.pageX-this.$("stage").offset().left+jQuery(document).scrollLeft(),y:j.pageY-this.$("stage").offset().top+jQuery(document).scrollTop()};},addPan:function(n){var q=this.options.image_crop;if(q===false){return;}if(this.options.image_crop===false){return;}n=n||this.controls.getActive().image;if(n.tagName.toUpperCase()!="IMG"){i.raise("Could not add pan");}var u=n.width/2;var s=n.height/2;var k=destX=this.getStyle(n,"left",true)||0;var j=destY=this.getStyle(n,"top",true)||0;var t=0;var r=0;var l=false;var p=new Date().getTime();var m=this.proxy(function(v){if(new Date().getTime()-p<50){return;}l=true;u=this.mousePosition(v).x;s=this.mousePosition(v).y;});var o=this.proxy(function(v){if(!l){return;}t=n.width-this.stageWidth;r=n.height-this.stageHeight;destX=u/this.stageWidth*t*-1;destY=s/this.stageHeight*r*-1;k+=(destX-k)/this.options.image_pan_smoothness;j+=(destY-j)/this.options.image_pan_smoothness;if(r>0){this.setStyle(n,{top:Math.max(r*-1,Math.min(0,j))});}if(t>0){this.setStyle(n,{left:Math.max(t*-1,Math.min(0,k))});}});this.forget(this.get("stage"),"mousemove");this.listen(this.get("stage"),"mousemove",m);this.addTimer("pan",o,30,true);},removePan:function(){this.forget(this.get("stage"),"mousemove");this.clearTimer("pan");},parseCarousel:function(m){var k=0;var l=0;var j=[0];this.loop(this.thumbnails,function(n,o){if(n.ready){k+=n.outerWidth||this.width(n.elem,true);j[o+1]=k;l=Math.max(l,this.height(n.elem));}});this.toggleClass(this.get("thumbnails-container"),"galleria-carousel",k>this.stageWidth);this.setStyle(this.get("thumbnails-list"),{overflow:"hidden",position:"relative"});this.setStyle(this.get("thumbnails"),{width:k,height:l,position:"relative",overflow:"hidden"});if(!this.carousel){this.initCarousel();}this.carousel.max=k;this.carousel.hooks=j;this.carousel.width=this.width(this.get("thumbnails-list"));this.carousel.setClasses();},initCarousel:function(){var j=this.carousel={right:this.get("thumb-nav-right"),left:this.get("thumb-nav-left"),update:this.proxy(function(){this.parseCarousel();}),width:0,current:0,set:function(k){k=Math.max(k,0);while(j.hooks[k-1]+j.width>j.max&&k>=0){k--;}j.current=k;j.animate();},hooks:[],getLast:function(k){k=k||j.current;return k-1;},follow:function(k){if(k==0||k==j.hooks.length-2){j.set(k);return;}var l=j.current;while(j.hooks[l]-j.hooks[j.current]<j.width&&l<=j.hooks.length){l++;}if(k-1<j.current){j.set(k-1);}else{if(k+2>l){j.set(k-l+j.current+2);}}},max:0,setClasses:this.proxy(function(){this.toggleClass(j.left,"disabled",!j.current);this.toggleClass(j.right,"disabled",j.hooks[j.current]+j.width>j.max);}),animate:this.proxy(function(k){j.setClasses();this.animate(this.get("thumbnails"),{to:{left:j.hooks[j.current]*-1},duration:this.options.carousel_speed,easing:"galleria",queue:false});})};this.listen(j.right,"click",this.proxy(function(l){if(this.options.carousel_steps=="auto"){for(var k=j.current;k<j.hooks.length;k++){if(j.hooks[k]-j.hooks[j.current]>j.width){j.set(k-2);break;}}}else{j.set(j.current+this.options.carousel_steps);}}));this.listen(j.left,"click",this.proxy(function(l){if(this.options.carousel_steps=="auto"){for(var k=j.current;k>=0;k--){if(j.hooks[j.current]-j.hooks[k]>j.width){j.set(k+2);break;}else{if(k==0){j.set(0);break;}}}}else{j.set(j.current-this.options.carousel_steps);}}));},addElement:function(){this.loop(arguments,function(j){this.dom[j]=this.create("div","galleria-"+j);});return this;},getDimensions:function(j){return{w:j.width,h:j.height,cw:this.stageWidth,ch:this.stageHeight,top:(this.stageHeight-j.height)/2,left:(this.stageWidth-j.width)/2};},attachKeyboard:function(j){this.keyboard.attach(j);return this;},detachKeyboard:function(){this.keyboard.detach();return this;},build:function(){this.append({"info-text":["info-title","info-description","info-author"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info"]});this.current=this.create("span","current");this.current.innerHTML="-";this.get("counter").innerHTML=' / <span class="total">'+this.data.length+"</span>";this.prependChild("counter",this.current);},appendChild:function(j,l){try{this.get(j).appendChild(this.get(l));}catch(k){}},prependChild:function(j,l){var l=this.get(l)||l;try{this.get(j).insertBefore(l,this.get(j).firstChild);}catch(k){}},remove:function(){var j=Array.prototype.slice.call(arguments);this.jQuery(j.join(",")).remove();},append:function(m){for(var l in m){if(m[l].constructor==Array){for(var k=0;m[l][k];k++){this.appendChild(l,m[l][k]);}}else{this.appendChild(l,m[l]);}}return this;},rescale:function(k,j,n){var m=this.options;n=this.proxy(n);if(typeof k=="function"){n=this.proxy(k);k=undefined;}var l=this.proxy(function(){this.stageWidth=k||this.width(this.get("stage"));this.stageHeight=j||this.height(this.get("stage"));this.controls.getActive().scale({width:this.stageWidth,height:this.stageHeight,crop:m.image_crop,max:m.max_scale_ratio,min:m.min_scale_ratio,margin:m.image_margin,position:m.image_position});if(this.carousel){this.carousel.update();}this.trigger(i.RESCALE);n();});if(i.WEBKIT&&!k&&!j){this.addTimer("scale",l,5);}else{l.call(this);}},show:function(k,j,l){if(!this.options.queue&&this.queue.stalled){return;}j=typeof j!="undefined"?!!j:k<this.active;l=l||false;k=Math.max(0,Math.min(parseInt(k),this.data.length-1));if(!l&&i.History){i.History.value(k.toString());return;}this.active=k;this.push([k,j],this.queue);if(!this.queue.stalled){this.showImage();}return this;},showImage:function(){var m=this.options;var y=this.queue[0];var w=y[0];var t=!!y[1];if(m.carousel&&this.carousel&&m.carousel_follow){this.carousel.follow(w);}var j=this.getData(w).image;var s=this.controls.getActive();var v=this.controls.getNext();var r=v.isCached(j);var l=this.proxy(function(){this.queue.stalled=false;this.toggleQuality(v.image,m.image_quality);this.setStyle(s.elem,{zIndex:0});this.setStyle(v.elem,{zIndex:1});this.trigger({type:i.IMAGE,index:w,imageTarget:v.image,thumbTarget:this.thumbnails[w].image});if(m.image_pan){this.addPan(v.image);}this.controls.swap();this.moveOut(s.image);if(this.getData(w).link){this.setStyle(v.image,{cursor:"pointer"});this.listen(v.image,"click",this.proxy(function(){if(m.popup_links){var n=g.open(this.getData(w).link,"_blank");}else{g.location.href=this.getData(w).link;}}));}Array.prototype.shift.call(this.queue);if(this.queue.length){this.showImage();}this.playCheck();});if(typeof m.preload=="number"&&m.preload>0){var k,q=this.getNext();try{for(var u=m.preload;u>0;u--){k=new c();k.add(this.getData(q).image);q=this.getNext(q);}}catch(x){}}this.trigger({type:i.LOADSTART,cached:r,index:w,imageTarget:v.image,thumbTarget:this.thumbnails[w].image});jQuery(this.thumbnails[w].elem).addClass("active").siblings(".active").removeClass("active");v.load(j,this.proxy(function(n){v.scale({width:this.stageWidth,height:this.stageHeight,crop:m.image_crop,max:m.max_scale_ratio,min:m.min_scale_ratio,margin:m.image_margin,position:m.image_position,complete:this.proxy(function(){if(s.image){this.toggleQuality(s.image,false);}this.toggleQuality(v.image,false);this.trigger({type:i.LOADFINISH,cached:r,index:w,imageTarget:v.image,thumbTarget:this.thumbnails[w].image});this.queue.stalled=true;var o=i.transitions[m.transition]||m.transition;this.removePan();this.setInfo(w);this.setCounter(w);if(typeof o=="function"){o.call(this,{prev:s.image,next:v.image,rewind:t,speed:m.transition_speed||400},l);}else{l();}})});}));},getNext:function(j){j=typeof j=="number"?j:this.active;return j==this.data.length-1?0:j+1;},getPrev:function(j){j=typeof j=="number"?j:this.active;return j===0?this.data.length-1:j-1;},next:function(){if(this.data.length>1){this.show(this.getNext(),false);}return this;},prev:function(){if(this.data.length>1){this.show(this.getPrev(),true);}return this;},get:function(j){return j in this.dom?this.dom[j]:null;},getData:function(j){return this.data[j]||this.data[this.active];},getIndex:function(){return typeof this.active==="number"?this.active:0;},play:function(j){this.trigger(i.PLAY);this.playing=true;this.playtime=j||this.playtime;this.playCheck();return this;},pause:function(){this.trigger(i.PAUSE);this.playing=false;return this;},playCheck:function(){var n=0;var k=20;var m=function(){return new Date().getTime();};var j=m();if(this.playing){this.clearTimer("play");var l=this.proxy(function(){n=m()-j;if(n>=this.playtime&&this.playing){this.clearTimer("play");this.next();return;}if(this.playing){this.trigger({type:i.PROGRESS,percent:Math.ceil(n/this.playtime*100),seconds:Math.floor(n/1000),milliseconds:n});this.addTimer("play",l,k);}});this.addTimer("play",l,k);}},setActive:function(j){this.active=j;return this;},setCounter:function(j){j=j||this.active;this.current.innerHTML=j+1;return this;},setInfo:function(j){var k=this.getData(j||this.active);this.loop(["title","description","author"],function(m){var n=this.get("info-"+m);var l=k[m]&&k[m].length?"reveal":"hide";this[l](n);if(k[m]){n.innerHTML=k[m];}});return this;},hasInfo:function(k){var m=this.getData(k);var j="title description author".split(" ");for(var l=0;j[l];l++){if(m[j[l]]&&m[j[l]].length){return true;}}return false;},getDataObject:function(k){var j={image:"",thumb:"",title:"",description:"",author:"",link:""};return k?this.mix(j,k):j;},jQuery:function(l){var j=[];this.loop(l.split(","),this.proxy(function(m){m=m.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.get(m)){j.push(m);}}));var k=jQuery(this.get(j.shift()));this.loop(j,this.proxy(function(m){k=k.add(this.get(m));}));return k;},$:function(j){return this.jQuery(j);},toggleQuality:function(j,k){if(!i.IE7||typeof j=="undefined"||!j){return this;}if(typeof k==="undefined"){k=j.style.msInterpolationMode=="nearest-neighbor";}j.style.msInterpolationMode=k?"bicubic":"nearest-neighbor";return this;},unload:function(){},load:function(){var l=0;var m=this.options;if((m.data_type=="auto"&&typeof m.data_source=="object"&&!(m.data_source instanceof jQuery)&&!m.data_source.tagName)||m.data_type=="json"||m.data_source.constructor==Array){this.data=m.data_source;this.trigger(i.DATA);}else{var k=jQuery(m.data_source).find(m.data_image_selector);var j=this.proxy(function(q){var p,o,n=q.parentNode;if(n&&n.nodeName=="A"){if(n.href.match(/\.(png|gif|jpg|jpeg)/i)){p=n.href;}else{o=n.href;}}var r=this.getDataObject({title:q.title,thumb:q.src,image:p||q.src,description:q.alt,link:o||q.getAttribute("longdesc"),elem:q});return this.mix(r,m.data_config(q));});this.loop(k,function(n){l++;this.push(j(n),this.data);if(!m.keep_source&&!Galleria.IE){n.parentNode.removeChild(n);}if(l==k.length){this.trigger(i.DATA);}});}}});i.log=function(){try{console.log.apply(console,Array.prototype.slice.call(arguments));}catch(j){try{opera.postError.apply(opera,arguments);}catch(k){alert(Array.prototype.join.call(arguments," "));}}};var a=navigator.userAgent.toLowerCase();var d=g.location.hash.replace(/#\//,"");i.DATA="data";i.READY="ready";i.THUMBNAIL="thumbnail";i.LOADSTART="loadstart";i.LOADFINISH="loadfinish";i.IMAGE="image";i.THEMELOAD="themeload";i.PLAY="play";i.PAUSE="pause";i.PROGRESS="progress";i.FULLSCREEN_ENTER="fullscreen_enter";i.FULLSCREEN_EXIT="fullscreen_exit";i.IDLE_ENTER="idle_enter";i.IDLE_EXIT="idle_exit";i.RESCALE="rescale";i.LIGHTBOX_OPEN="lightbox_open";i.LIGHTBOX_CLOSE="lightbox_cloe";i.LIGHTBOX_IMAGE="lightbox_image";i.IE8=(typeof(XDomainRequest)!=="undefined");i.IE7=!!(g.XMLHttpRequest&&document.expando);i.IE6=(!g.XMLHttpRequest);i.IE=!!(i.IE6||i.IE7);i.WEBKIT=/webkit/.test(a);i.SAFARI=/safari/.test(a);i.CHROME=/chrome/.test(a);i.QUIRK=(i.IE&&document.compatMode&&document.compatMode=="BackCompat");i.MAC=/mac/.test(navigator.platform.toLowerCase());i.OPERA=!!g.opera;i.Picture=c;i.addTheme=function(m){var l={};var n=["name","author","version","defaults","init"];var k=i.prototype;k.loop(n,function(o){if(!m[o]){i.raise(o+" not specified in theme.");}if(o!="name"&&o!="init"){l[o]=m[o];}});l.init=m.init;if(m.css){var j;k.loop(k.getElements("script"),function(p){var o=new RegExp("galleria."+m.name.toLowerCase()+".js");if(o.test(p.src)){j=p.src.replace(/[^\/]*$/,"")+m.css;k.loadCSS(j,function(){i.theme=l;jQuery(document).trigger(i.THEMELOAD);});}});if(!j){i.raise("No theme CSS loaded");}}return l;};i.raise=function(j){if(i.debug){throw new Error(j);}};i.loadTheme=function(j){i.prototype.loadScript(j);};i.galleries=[];i.get=function(j){if(i.galleries[j]){return i.galleries[j];}else{if(typeof j!=="number"){return i.galleries;}else{i.raise("Gallery index not found");}}};jQuery.easing.galleria=function(k,l,j,n,m){if((l/=m/2)<1){return n/2*l*l*l*l+j;}return -n/2*((l-=2)*l*l*l-2)+j;};i.transitions={add:function(j,k){if(j!=arguments.callee.name){this[j]=k;}},fade:function(k,j){jQuery(k.next).show().css("opacity",0).animate({opacity:1},k.speed,j);if(k.prev){jQuery(k.prev).css("opacity",1).animate({opacity:0},k.speed);}},flash:function(k,j){jQuery(k.next).css("opacity",0);if(k.prev){jQuery(k.prev).animate({opacity:0},(k.speed/2),function(){jQuery(k.next).animate({opacity:1},k.speed,j);});}else{jQuery(k.next).animate({opacity:1},k.speed,j);}},pulse:function(k,j){if(k.prev){jQuery(k.prev).css("opacity",0);}jQuery(k.next).css("opacity",0).animate({opacity:1},k.speed,j);},slide:function(n,k){var m=jQuery(n.next).parent();var j=this.$("images");var l=this.stageWidth;m.css({left:l*(n.rewind?-1:1)});j.animate({left:l*(n.rewind?1:-1)},{duration:n.speed,queue:false,easing:"galleria",complete:function(){j.css("left",0);m.css("left",0);k();}});},fadeslide:function(k,j){if(k.prev){jQuery(k.prev).css({opacity:1,left:0}).animate({opacity:0,left:50*(k.rewind?1:-1)},{duration:k.speed,queue:false,easing:"swing"});}jQuery(k.next).css({left:50*(k.rewind?-1:1),opacity:0}).animate({opacity:1,left:0},{duration:k.speed,complete:j,queue:false,easing:"swing"});}};i.addTransition=function(){i.transitions.add.apply(this,arguments);};jQuery.fn.galleria=function(k){k=k||{};var j=this.selector;return this.each(function(){if(!k.keep_source){jQuery(this).children().hide();}k=i.prototype.mix(k,{target:this});var l=i.prototype.height(this)||i.prototype.getStyle(this,"height",true);if(!k.height&&l){k=i.prototype.mix({height:l},k);}i.debug=!!k.debug;var m=new i(k);Galleria.galleries.push(m);if(i.theme){m.init();}else{jQuery(document).bind(i.THEMELOAD,function(){m.init();});}});};})();
/* jquery-ui-map rc1 | Johan S�ll Larsson */
eval(function(h,b,j,f,g,i){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36));};if(!"".replace(/^/,String)){while(j--){i[g(j)]=f[j]||g(j);}f=[function(a){return i[a];}];g=function(){return"\\w+";};j=1;}while(j--){if(f[j]){h=h.replace(new RegExp("\\b"+g(j)+"\\b","g"),f[j]);}}return h;}('(3(d){d.a=3(a,b){j c=a.w(".")[0],a=a.w(".")[1];d[c]=d[c]||{};d[c][a]=3(a,b){K.I&&2.16(a,b)};d[c][a].J=d.n({1A:c,1z:a},b);d.S[a]=3(b){j g="1y"===1D b,f=H.J.12.15(K,1),i=2;l(g&&"1C"===b.1B(0,1))9 i;2.13(3(){j h=d.Z(2,a);h||(h=d.Z(2,a,k d[c][a](b,2)));l(g&&(h=h[b].10(h,f),"4"===b||o!=h))i=h});9 i}};d.a("1x.1t",{r:{1s:"1r",1w:5},1v:3(a,b){l(b)2.r[a]=b,2.4("8").B(a,b);P 9 2.r[a]},16:3(a,b){2.C=b;a=a||{};m.n(2.r,a,{1e:2.D(a.1e)});2.1c();2.1j&&2.1j()},1c:3(){j a=2;2.q={8:k 6.7.1u(a.C,a.r),L:[],t:[],u:[]};6.7.s.1N(a.q.8,"1M",3(){d(a.C).19("1L",a.q.8)});a.F(a.r.1Q,a.q.8)},1d:3(a){j b=2.4("1i",k 6.7.1P);b.n(2.D(a));2.4("8").1O(b)},1K:3(a){j b=2.4("8").1G();9 b?b.1F(a.18()):!1},1E:3(a,b){2.4("8").1J[b].O(2.z(a))},1I:3(a,b){a.8=2.4("8");a.Y=2.D(a.Y);j c=k(a.1H||6.7.1k)(a),e=2.4("L");c.V?e[c.V]=c:e.O(c);c.1i&&2.1d(c.18());2.F(b,a.8,c);9 d(c)},y:3(a){2.G(2.4(a));2.B(a,[])},G:3(a){A(j b R a)a.U(b)&&(a[b]p 6.7.T?(6.7.s.X(a[b]),a[b].x&&a[b].x(o)):a[b]p H&&2.G(a[b]),a[b]=o)},1p:3(a,b,c){a=2.4(a);b.v=d.1l(b.v)?b.v:[b.v];A(j e R a)l(a.U(e)){j g=!1,f;A(f R b.v)l(-1<d.1n(b.v[f],a[e][b.1q]))g=!0;P l(b.11&&"1m"===b.11){g=!1;1o}c(a[e],g)}},4:3(a,b){j c=2.q;l(!c[a]){l(-1<a.2i(">")){A(j e=a.14(/ /g,"").w(">"),d=0;d<e.I;d++){l(!c[e[d]])l(b)c[e[d]]=d+1<e.I?[]:b;P 9 o;c=c[e[d]]}9 c}b&&!c[a]&&2.B(a,b)}9 c[a]},2h:3(a,b,c){j d=2.4("Q",a.2j||k 6.7.2l);d.M(a);d.2k(2.4("8"),2.z(b));2.F(c,d)},2d:3(){o!=2.4("Q")&&2.4("Q").2c()},B:3(a,b){2.q[a]=b},2e:3(){j a=2.4("8"),b=a.2g();d(a).17("2f");a.2m(b)},2r:3(){2.y("L");2.y("u");2.y("t");2.G(2.q);m.2s(2.C,2.2t)},F:3(a){a&&d.2o(a)&&a.10(2,H.J.12.15(K,1))},D:3(a){l(!a)9 k 6.7.N(0,0);l(a p 6.7.N)9 a;a=a.14(/ /g,"").w(",");9 k 6.7.N(a[0],a[1])},z:3(a){9!a?o:a p m?a[0]:a p 2n?a:d("#"+a)[0]},2q:3(a,b){j c=k 6.7[a](m.n({8:2.4("8")},b));2.4("t > "+a,[]).O(c);9 d(c)},2p:3(a,b){(!b?2.4("t > E",k 6.7.E):2.4("t > E",k 6.7.E(b,a))).M(m.n({8:2.4("8")},a))},2b:3(a,b,c){2.4("t > "+a,k 6.7.1X(b,m.n({8:2.4("8")},c)))},1W:3(a,b,c){j d=2,g=2.4("u > 1f",k 6.7.1f),f=2.4("u > 1g",k 6.7.1g);b&&f.M(b);g.1Y(a,3(a,b){"20"===b?(f.1Z(a),f.x(d.4("8"))):f.x(o);c(a,b)})},1S:3(a,b){2.4("8").1R(2.4("u > 1a",k 6.7.1a(2.z(a),b)))},1T:3(a,b){2.4("u > 1b",k 6.7.1b).1V(a,b)}});m.S.n({17:3(a){6.7.s.19(2[0],a);9 2},W:3(a,b,c){6.7&&2[0]p 6.7.T?6.7.s.1U(2[0],a,b):c?2.1h(a,b,c):2.1h(a,b);9 2},27:3(a){6.7&&2[0]p 6.7.T?a?6.7.s.26(2[0],a):6.7.s.X(2[0]):2.28(a);9 2}});m.13("2a 29 22 21 23 25 24".w(" "),3(a,b){m.S[b]=3(a,d){9 2.W(b,a,d)}})})(m);',62,154,"||this|function|get||google|maps|map|return||||||||||var|new|if|jQuery|extend|null|instanceof|instance|options|event|overlays|services|value|split|setMap|clear|_unwrap|for|set|el|_latLng|FusionTablesLayer|_call|_c|Array|length|prototype|arguments|markers|setOptions|LatLng|push|else|iw|in|fn|MVCObject|hasOwnProperty|id|addEventListener|clearInstanceListeners|position|data|apply|operator|slice|each|replace|call|_setup|triggerEvent|getPosition|trigger|StreetViewPanorama|Geocoder|_create|addBounds|center|DirectionsService|DirectionsRenderer|bind|bounds|_init|Marker|isArray|AND|inArray|break|find|property|roadmap|mapTypeId|gmap|Map|option|zoom|ui|string|pluginName|namespace|substring|_|typeof|addControl|contains|getBounds|marker|addMarker|controls|inViewport|init|bounds_changed|addListenerOnce|fitBounds|LatLngBounds|callback|setStreetView|displayStreetView|search|addListener|geocode|displayDirections|KmlLayer|route|setDirections|OK|mouseover|dblclick|mouseout|dragend|drag|clearListeners|removeEventListener|unbind|rightclick|click|loadKML|close|closeInfoWindow|refresh|resize|getCenter|openInfoWindow|indexOf|infoWindow|open|InfoWindow|setCenter|Object|isFunction|loadFusion|addShape|destroy|removeData|name".split("|"),0,{}));this.Handlebars={};(function(c){c.VERSION="1.0.rc.1";c.helpers={};c.partials={};c.registerHelper=function(e,f,d){if(d){f.not=d;}this.helpers[e]=f;};c.registerPartial=function(d,e){this.partials[d]=e;};c.registerHelper("helperMissing",function(d){if(arguments.length===2){return undefined;}else{throw new Error("Could not find property '"+d+"'");}});var a=Object.prototype.toString,b="[object Function]";c.registerHelper("blockHelperMissing",function(g,f){var d=f.inverse||function(){},i=f.fn;var e="";var h=a.call(g);if(h===b){g=g.call(this);}if(g===true){return i(this);}else{if(g===false||g==null){return d(this);}else{if(h==="[object Array]"){if(g.length>0){return c.helpers.each(g,f);}else{return d(this);}}else{return i(g);}}}});c.K=function(){};c.createFrame=Object.create||function(d){c.K.prototype=d;var e=new c.K();c.K.prototype=null;return e;};c.registerHelper("each",function(k,g){var l=g.fn,d=g.inverse;var f="",m;if(g.data){m=c.createFrame(g.data);}if(k&&k.length>0){for(var h=0,e=k.length;h<e;h++){if(m){m.index=h;}f=f+l(k[h],{data:m});}}else{f=d(this);}return f;});c.registerHelper("if",function(e,d){var f=a.call(e);if(f===b){e=e.call(this);}if(!e||c.Utils.isEmpty(e)){return d.inverse(this);}else{return d.fn(this);}});c.registerHelper("unless",function(f,e){var g=e.fn,d=e.inverse;e.fn=d;e.inverse=g;return c.helpers["if"].call(this,f,e);});c.registerHelper("with",function(e,d){return d.fn(e);});c.registerHelper("log",function(d){c.log(d);});}(this.Handlebars));var handlebars=(function(){var g={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function b(h,k,l,o,n,j,m){var i=j.length-1;switch(n){case 1:return j[i-1];break;case 2:this.$=new o.ProgramNode(j[i-2],j[i]);break;case 3:this.$=new o.ProgramNode(j[i]);break;case 4:this.$=new o.ProgramNode([]);break;case 5:this.$=[j[i]];break;case 6:j[i-1].push(j[i]);this.$=j[i-1];break;case 7:this.$=new o.BlockNode(j[i-2],j[i-1].inverse,j[i-1],j[i]);break;case 8:this.$=new o.BlockNode(j[i-2],j[i-1],j[i-1].inverse,j[i]);break;case 9:this.$=j[i];break;case 10:this.$=j[i];break;case 11:this.$=new o.ContentNode(j[i]);break;case 12:this.$=new o.CommentNode(j[i]);break;case 13:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 14:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 15:this.$=j[i-1];break;case 16:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 17:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1],true);break;case 18:this.$=new o.PartialNode(j[i-1]);break;case 19:this.$=new o.PartialNode(j[i-2],j[i-1]);break;case 20:break;case 21:this.$=[[j[i-2]].concat(j[i-1]),j[i]];break;case 22:this.$=[[j[i-1]].concat(j[i]),null];break;case 23:this.$=[[j[i-1]],j[i]];break;case 24:this.$=[[j[i]],null];break;case 25:this.$=[[new o.DataNode(j[i])],null];break;case 26:j[i-1].push(j[i]);this.$=j[i-1];break;case 27:this.$=[j[i]];break;case 28:this.$=j[i];break;case 29:this.$=new o.StringNode(j[i]);break;case 30:this.$=new o.IntegerNode(j[i]);break;case 31:this.$=new o.BooleanNode(j[i]);break;case 32:this.$=new o.DataNode(j[i]);break;case 33:this.$=new o.HashNode(j[i]);break;case 34:j[i-1].push(j[i]);this.$=j[i-1];break;case 35:this.$=[j[i]];break;case 36:this.$=[j[i-2],j[i]];break;case 37:this.$=[j[i-2],new o.StringNode(j[i])];break;case 38:this.$=[j[i-2],new o.IntegerNode(j[i])];break;case 39:this.$=[j[i-2],new o.BooleanNode(j[i])];break;case 40:this.$=[j[i-2],new o.DataNode(j[i])];break;case 41:this.$=new o.IdNode(j[i]);break;case 42:j[i-2].push(j[i]);this.$=j[i-2];break;case 43:this.$=[j[i]];break;}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function d(i,h){throw new Error(i);},parse:function f(s){var z=this,n=[0],I=[null],u=[],J=this.table,i="",t=0,G=0,k=0,q=2,w=1;this.lexer.setInput(s);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={};}var j=this.lexer.yylloc;u.push(j);var l=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError;}function y(p){n.length=n.length-2*p;I.length=I.length-p;u.length=u.length-p;}function x(){var p;p=z.lexer.lex()||1;if(typeof p!=="number"){p=z.symbols_[p]||p;}return p;}var F,B,m,E,K,v,D={},A,H,h,o;while(true){m=n[n.length-1];if(this.defaultActions[m]){E=this.defaultActions[m];}else{if(F===null||typeof F=="undefined"){F=x();}E=J[m]&&J[m][F];}if(typeof E==="undefined"||!E.length||!E[0]){var C="";if(!k){o=[];for(A in J[m]){if(this.terminals_[A]&&A>2){o.push("'"+this.terminals_[A]+"'");}}if(this.lexer.showPosition){C="Parse error on line "+(t+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+o.join(", ")+", got '"+(this.terminals_[F]||F)+"'";}else{C="Parse error on line "+(t+1)+": Unexpected "+(F==1?"end of input":"'"+(this.terminals_[F]||F)+"'");}this.parseError(C,{text:this.lexer.match,token:this.terminals_[F]||F,line:this.lexer.yylineno,loc:j,expected:o});}}if(E[0] instanceof Array&&E.length>1){throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+F);}switch(E[0]){case 1:n.push(F);I.push(this.lexer.yytext);u.push(this.lexer.yylloc);n.push(E[1]);F=null;if(!B){G=this.lexer.yyleng;i=this.lexer.yytext;t=this.lexer.yylineno;j=this.lexer.yylloc;if(k>0){k--;}}else{F=B;B=null;}break;case 2:H=this.productions_[E[1]][1];D.$=I[I.length-H];D._$={first_line:u[u.length-(H||1)].first_line,last_line:u[u.length-1].last_line,first_column:u[u.length-(H||1)].first_column,last_column:u[u.length-1].last_column};if(l){D._$.range=[u[u.length-(H||1)].range[0],u[u.length-1].range[1]];}v=this.performAction.call(D,i,G,t,this.yy,E[1],I,u);if(typeof v!=="undefined"){return v;}if(H){n=n.slice(0,-1*H*2);I=I.slice(0,-1*H);u=u.slice(0,-1*H);}n.push(this.productions_[E[1]][0]);I.push(D.$);u.push(D._$);h=J[n[n.length-2]][n[n.length-1]];n.push(h);break;case 3:return true;}}return true;}};var a=(function(){var k=({EOF:1,parseError:function m(p,o){if(this.yy.parser){this.yy.parser.parseError(p,o);}else{throw new Error(p);}},setInput:function(o){this._input=o;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0];}this.offset=0;return this;},input:function(){var p=this._input[0];this.yytext+=p;this.yyleng++;this.offset++;this.match+=p;this.matched+=p;var o=p.match(/(?:\r\n?|\n).*/g);if(o){this.yylineno++;this.yylloc.last_line++;}else{this.yylloc.last_column++;}if(this.options.ranges){this.yylloc.range[1]++;}this._input=this._input.slice(1);return p;},unput:function(q){var o=q.length;var p=q.split(/(?:\r\n?|\n)/g);this._input=q+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-o-1);this.offset-=o;var t=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(p.length-1){this.yylineno-=p.length-1;}var s=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:p?(p.length===t.length?this.yylloc.first_column:0)+t[t.length-p.length].length-p[0].length:this.yylloc.first_column-o};if(this.options.ranges){this.yylloc.range=[s[0],s[0]+this.yyleng-o];}return this;},more:function(){this._more=true;return this;},less:function(o){this.unput(this.match.slice(o));},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var o=this.match;if(o.length<20){o+=this._input.substr(0,20-o.length);}return(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"");},showPosition:function(){var o=this.pastInput();var p=new Array(o.length+1).join("-");return o+this.upcomingInput()+"\n"+p+"^";},next:function(){if(this.done){return this.EOF;}if(!this._input){this.done=true;}var u,s,p,r,q,o;if(!this._more){this.yytext="";this.match="";}var v=this._currentRules();for(var t=0;t<v.length;t++){p=this._input.match(this.rules[v[t]]);if(p&&(!s||p[0].length>s[0].length)){s=p;r=t;if(!this.options.flex){break;}}}if(s){o=s[0].match(/(?:\r\n?|\n).*/g);if(o){this.yylineno+=o.length;}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s[0].length};this.yytext+=s[0];this.match+=s[0];this.matches=s;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng];}this._more=false;this._input=this._input.slice(s[0].length);this.matched+=s[0];u=this.performAction.call(this,this.yy,this,v[r],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false;}if(u){return u;}else{return;}}if(this._input===""){return this.EOF;}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function h(){var o=this.next();if(typeof o!=="undefined"){return o;}else{return this.lex();}},begin:function i(o){this.conditionStack.push(o);},popState:function n(){return this.conditionStack.pop();},_currentRules:function l(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;},topState:function(){return this.conditionStack[this.conditionStack.length-2];},pushState:function i(o){this.begin(o);}});k.options={};k.performAction=function j(s,p,r,o){var q=o;switch(r){case 0:if(p.yytext.slice(-1)!=="\\"){this.begin("mu");}if(p.yytext.slice(-1)==="\\"){p.yytext=p.yytext.substr(0,p.yyleng-1),this.begin("emu");}if(p.yytext){return 14;}break;case 1:return 14;break;case 2:if(p.yytext.slice(-1)!=="\\"){this.popState();}if(p.yytext.slice(-1)==="\\"){p.yytext=p.yytext.substr(0,p.yyleng-1);}return 14;break;case 3:return 24;break;case 4:return 16;break;case 5:return 20;break;case 6:return 19;break;case 7:return 19;break;case 8:return 23;break;case 9:return 23;break;case 10:p.yytext=p.yytext.substr(3,p.yyleng-5);this.popState();return 15;break;case 11:return 22;break;case 12:return 35;break;case 13:return 34;break;case 14:return 34;break;case 15:return 37;break;case 16:break;case 17:this.popState();return 18;break;case 18:this.popState();return 18;break;case 19:p.yytext=p.yytext.substr(1,p.yyleng-2).replace(/\\"/g,'"');return 29;break;case 20:p.yytext=p.yytext.substr(1,p.yyleng-2).replace(/\\"/g,'"');return 29;break;case 21:p.yytext=p.yytext.substr(1);return 27;break;case 22:return 31;break;case 23:return 31;break;case 24:return 30;break;case 25:return 34;break;case 26:p.yytext=p.yytext.substr(1,p.yyleng-2);return 34;break;case 27:return"INVALID";break;case 28:return 5;break;}};k.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];k.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:false},emu:{rules:[2],inclusive:false},INITIAL:{rules:[0,1,28],inclusive:true}};return k;})();g.lexer=a;function e(){this.yy={};}e.prototype=g;g.Parser=e;return new e;})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=handlebars;exports.Parser=handlebars.Parser;exports.parse=function(){return handlebars.parse.apply(handlebars,arguments);};exports.main=function commonjsMain(a){if(!a[1]){throw new Error("Usage: "+a[0]+" FILE");}var c,b;if(typeof process!=="undefined"){c=require("fs").readFileSync(require("path").resolve(a[1]),"utf8");}else{c=require("file").path(require("file").cwd()).join(a[1]).read({charset:"utf-8"});}return exports.parser.parse(c);};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args);}}Handlebars.Parser=handlebars;Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a);};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a);};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,a){}};Handlebars.log=function(b,a){Handlebars.logger.log(b,a);};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b);}};Handlebars.AST.MustacheNode=function(g,d,c){this.type="mustache";this.escaped=!c;this.hash=d;var f=this.id=g[0];var e=this.params=g.slice(1);var b=this.eligibleHelper=f.isSimple;this.isHelper=b&&(e.length||d);};Handlebars.AST.PartialNode=function(c,b){this.type="partial";this.id=c;this.context=b;};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original);}};Handlebars.AST.BlockNode=function(d,c,b,e){a(d.id,e);this.type="block";this.mustache=d;this.program=c;this.inverse=b;if(this.inverse&&!this.program){this.isInverse=true;}};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b;};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b;};Handlebars.AST.IdNode=function(f){this.type="ID";this.original=f.join(".");var d=[],g=0;for(var e=0,b=f.length;e<b;e++){var c=f[e];if(c===".."){g++;}else{if(c==="."||c==="this"){this.isScoped=true;}else{d.push(c);}}}this.parts=d;this.string=d.join(".");this.depth=g;this.isSimple=f.length===1&&!this.isScoped&&g===0;};Handlebars.AST.DataNode=function(b){this.type="DATA";this.id=b;};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b;};Handlebars.AST.IntegerNode=function(b){this.type="INTEGER";this.integer=b;};Handlebars.AST.BooleanNode=function(b){this.type="BOOLEAN";this.bool=b;};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b;};})();Handlebars.Exception=function(b){var a=Error.prototype.constructor.apply(this,arguments);for(var c in a){if(a.hasOwnProperty(c)){this[c]=a[c];}}this.message=a.message;};Handlebars.Exception.prototype=new Error();Handlebars.SafeString=function(a){this.string=a;};Handlebars.SafeString.prototype.toString=function(){return this.string.toString();};(function(){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var d=/[&<>"'`]/g;var b=/[&<>"'`]/;var a=function(e){return c[e]||"&amp;";};Handlebars.Utils={escapeExpression:function(e){if(e instanceof Handlebars.SafeString){return e.toString();}else{if(e==null||e===false){return"";}}if(!b.test(e)){return e;}return e.replace(d,a);},isEmpty:function(e){if(typeof e==="undefined"){return true;}else{if(e===null){return true;}else{if(e===false){return true;}else{if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===0){return true;}else{return false;}}}}}};})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(g,f){g.prototype={compiler:g,disassemble:function(){var p=this.opcodes,o,m=[],r,q;for(var n=0,h=p.length;n<h;n++){o=p[n];if(o.opcode==="DECLARE"){m.push("DECLARE "+o.name+"="+o.value);}else{r=[];for(var k=0;k<o.args.length;k++){q=o.args[k];if(typeof q==="string"){q='"'+q.replace("\n","\\n")+'"';}r.push(q);}m.push(o.opcode+" "+r.join(" "));}}return m.join("\n");},guid:0,compile:function(h,j){this.children=[];this.depths={list:[]};this.options=j;var k=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(k){for(var i in k){this.options.knownHelpers[i]=k[i];}}return this.program(h);},accept:function(h){return this[h.type](h);},program:function(k){var j=k.statements,n;this.opcodes=[];for(var m=0,h=j.length;m<h;m++){n=j[m];this[n.type](n);}this.isSimple=h===1;this.depths.list=this.depths.list.sort(function(l,i){return l-i;});return this;},compileProgram:function(k){var h=new this.compiler().compile(k,this.options);var m=this.guid++,o;this.usePartial=this.usePartial||h.usePartial;this.children[m]=h;for(var n=0,j=h.depths.list.length;n<j;n++){o=h.depths.list[n];if(o<2){continue;}else{this.addDepth(o-1);}}return m;},block:function(l){var k=l.mustache,i=l.program,h=l.inverse;if(i){i=this.compileProgram(i);}if(h){h=this.compileProgram(h);}var j=this.classifyMustache(k);if(j==="helper"){this.helperMustache(k,i,h);}else{if(j==="simple"){this.simpleMustache(k);this.opcode("pushProgram",i);this.opcode("pushProgram",h);this.opcode("pushLiteral","{}");this.opcode("blockValue");}else{this.ambiguousMustache(k,i,h);this.opcode("pushProgram",i);this.opcode("pushProgram",h);this.opcode("pushLiteral","{}");this.opcode("ambiguousBlockValue");}}this.opcode("append");},hash:function(m){var k=m.pairs,o,n;this.opcode("push","{}");for(var j=0,h=k.length;j<h;j++){o=k[j];n=o[1];this.accept(n);this.opcode("assignToHash",o[0]);}},partial:function(h){var i=h.id;this.usePartial=true;if(h.context){this.ID(h.context);}else{this.opcode("push","depth0");}this.opcode("invokePartial",i.original);this.opcode("append");},content:function(h){this.opcode("appendContent",h.string);},mustache:function(j){var h=this.options;var i=this.classifyMustache(j);if(i==="simple"){this.simpleMustache(j);}else{if(i==="helper"){this.helperMustache(j);}else{this.ambiguousMustache(j);}}if(j.escaped&&!h.noEscape){this.opcode("appendEscaped");}else{this.opcode("append");}},ambiguousMustache:function(k,i,h){var l=k.id,j=l.parts[0];this.opcode("getContext",l.depth);this.opcode("pushProgram",i);this.opcode("pushProgram",h);this.opcode("invokeAmbiguous",j);},simpleMustache:function(j,i,h){var k=j.id;if(k.type==="DATA"){this.DATA(k);}else{if(k.parts.length){this.ID(k);}else{this.addDepth(k.depth);this.opcode("getContext",k.depth);this.opcode("pushContext");}}this.opcode("resolvePossibleLambda");},helperMustache:function(k,i,h){var l=this.setupFullMustacheParams(k,i,h),j=k.id.parts[0];if(this.options.knownHelpers[j]){this.opcode("invokeKnownHelper",l.length,j);}else{if(this.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+j);}else{this.opcode("invokeHelper",l.length,j);}}},ID:function(m){this.addDepth(m.depth);this.opcode("getContext",m.depth);var j=m.parts[0];if(!j){this.opcode("pushContext");}else{this.opcode("lookupOnContext",m.parts[0]);}for(var k=1,h=m.parts.length;k<h;k++){this.opcode("lookup",m.parts[k]);}},DATA:function(h){this.options.data=true;this.opcode("lookupData",h.id);},STRING:function(h){this.opcode("pushString",h.string);},INTEGER:function(h){this.opcode("pushLiteral",h.integer);},BOOLEAN:function(h){this.opcode("pushLiteral",h.bool);},comment:function(){},opcode:function(h){this.opcodes.push({opcode:h,args:[].slice.call(arguments,1)});},declare:function(h,i){this.opcodes.push({opcode:"DECLARE",name:h,value:i});},addDepth:function(h){if(isNaN(h)){throw new Error("EWOT");}if(h===0){return;}if(!this.depths[h]){this.depths[h]=true;this.depths.list.push(h);}},classifyMustache:function(k){var j=k.isHelper;var l=k.eligibleHelper;var i=this.options;if(l&&!j){var h=k.id.parts[0];if(i.knownHelpers[h]){j=true;}else{if(i.knownHelpersOnly){l=false;}}}if(j){return"helper";}else{if(l){return"ambiguous";}else{return"simple";}}},pushParams:function(k){var h=k.length,j;while(h--){j=k[h];if(this.options.stringParams){if(j.depth){this.addDepth(j.depth);}this.opcode("getContext",j.depth||0);this.opcode("pushStringParam",j.string);}else{this[j.type](j);}}},setupMustacheParams:function(h){var i=h.params;this.pushParams(i);if(h.hash){this.hash(h.hash);}else{this.opcode("pushLiteral","{}");}return i;},setupFullMustacheParams:function(j,i,h){var k=j.params;this.pushParams(k);this.opcode("pushProgram",i);this.opcode("pushProgram",h);if(j.hash){this.hash(j.hash);}else{this.opcode("pushLiteral","{}");}return k;}};var c=function(h){this.value=h;};f.prototype={nameLookup:function(j,h,i){if(/^[0-9]+$/.test(h)){return j+"["+h+"]";}else{if(f.isValidJavaScriptVariableName(h)){return j+"."+h;}else{return j+"['"+h+"']";}}},appendToBuffer:function(h){if(this.environment.isSimple){return"return "+h+";";}else{return"buffer += "+h+";";}},initializeBuffer:function(){return this.quotedString("");},namespace:"Handlebars",compile:function(h,i,k,j){this.environment=h;this.options=i||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!k;this.context=k||{programs:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.compileChildren(h,i);var m=h.opcodes,l;this.i=0;for(b=m.length;this.i<b;this.i++){l=m[this.i];if(l.opcode==="DECLARE"){this[l.name]=l.value;}else{this[l.opcode].apply(this,l.args);}}return this.createFunctionContext(j);},nextOpcode:function(){var i=this.environment.opcodes,h=i[this.i+1];return i[this.i+1];},eat:function(h){this.i=this.i+1;},preamble:function(){var h=[];if(!this.isChild){var i=this.namespace;var j="helpers = helpers || "+i+".helpers;";if(this.environment.usePartial){j=j+" partials = partials || "+i+".partials;";}if(this.options.data){j=j+" data = data || {};";}h.push(j);}else{h.push("");}if(!this.environment.isSimple){h.push(", buffer = "+this.initializeBuffer());}else{h.push("");}this.lastContext=0;this.source=h;},createFunctionContext:function(o){var p=this.stackVars.concat(this.registers.list);if(p.length>0){this.source[1]=this.source[1]+", "+p.join(", ");}if(!this.isChild){var j=[];for(var n in this.context.aliases){this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";";}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n";}if(!this.environment.isSimple){this.source.push("return buffer;");}var q=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var m=0,h=this.environment.depths.list.length;m<h;m++){q.push("depth"+this.environment.depths.list[m]);}if(o){q.push(this.source.join("\n  "));return Function.apply(this,q);}else{var k="function "+(this.name||"")+"("+q.join(",")+") {\n  "+this.source.join("\n  ")+"}";Handlebars.log(Handlebars.logger.DEBUG,k+"\n\n");return k;}},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var h=["depth0"];this.setupParams(0,h);this.replaceStack(function(i){h.splice(1,0,i);return i+" = blockHelperMissing.call("+h.join(", ")+")";});},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var i=["depth0"];this.setupParams(0,i);var h=this.topStack();i.splice(1,0,h);this.source.push("if (!"+this.lastHelper+") { "+h+" = blockHelperMissing.call("+i.join(", ")+"); }");},appendContent:function(h){this.source.push(this.appendToBuffer(this.quotedString(h)));},append:function(){var h=this.popStack();this.source.push("if("+h+" || "+h+" === 0) { "+this.appendToBuffer(h)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }");}},appendEscaped:function(){var i=this.nextOpcode(),h="";this.context.aliases.escapeExpression="this.escapeExpression";if(i&&i.opcode==="appendContent"){h=" + "+this.quotedString(i.args[0]);this.eat(i);}this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+h));},getContext:function(h){if(this.lastContext!==h){this.lastContext=h;}},lookupOnContext:function(h){this.pushStack(this.nameLookup("depth"+this.lastContext,h,"context"));},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext);},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(h){return"typeof "+h+" === functionType ? "+h+"() : "+h;});},lookup:function(h){this.replaceStack(function(i){return i+" == null || "+i+" === false ? "+i+" : "+this.nameLookup(i,h,"context");});},lookupData:function(h){this.pushStack(this.nameLookup("data",h,"data"));},pushStringParam:function(h){this.pushStackLiteral("depth"+this.lastContext);this.pushString(h);},pushString:function(h){this.pushStackLiteral(this.quotedString(h));},push:function(h){this.pushStack(h);},pushLiteral:function(h){this.pushStackLiteral(h);},pushProgram:function(h){if(h!=null){this.pushStackLiteral(this.programExpression(h));}else{this.pushStackLiteral(null);}},invokeHelper:function(j,h){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(j,h);this.register("foundHelper",i.name);this.pushStack("foundHelper ? foundHelper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")");},invokeKnownHelper:function(j,h){var i=this.setupHelper(j,h);this.pushStack(i.name+".call("+i.callParams+")");},invokeAmbiguous:function(h){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var i=this.setupHelper(0,h);var j=this.lastHelper=this.nameLookup("helpers",h,"helper");this.register("foundHelper",j);var l=this.nameLookup("depth"+this.lastContext,h,"context");var k=this.nextStack();this.source.push("if (foundHelper) { "+k+" = foundHelper.call("+i.callParams+"); }");this.source.push("else { "+k+" = "+l+"; "+k+" = typeof "+k+" === functionType ? "+k+"() : "+k+"; }");},invokePartial:function(h){var i=[this.nameLookup("partials",h,"partial"),"'"+h+"'",this.popStack(),"helpers","partials"];if(this.options.data){i.push("data");}this.context.aliases.self="this";this.pushStack("self.invokePartial("+i.join(", ")+");");},assignToHash:function(h){var i=this.popStack();var j=this.topStack();this.source.push(j+"['"+h+"'] = "+i+";");},compiler:f,compileChildren:function(h,m){var o=h.children,q,p;for(var n=0,j=o.length;n<j;n++){q=o[n];p=new this.compiler();this.context.programs.push("");var k=this.context.programs.length;q.index=k;q.name="program"+k;this.context.programs[k]=p.compile(q,m,this.context);}},programExpression:function(j){this.context.aliases.self="this";if(j==null){return"self.noop";}var p=this.environment.children[j],o=p.depths.list,n;var m=[p.index,p.name,"data"];for(var k=0,h=o.length;k<h;k++){n=o[k];if(n===1){m.push("depth0");}else{m.push("depth"+(n-1));}}if(o.length===0){return"self.program("+m.join(", ")+")";}else{m.shift();return"self.programWithDepth("+m.join(", ")+")";}},register:function(h,i){this.useRegister(h);this.source.push(h+" = "+i+";");},useRegister:function(h){if(!this.registers[h]){this.registers[h]=true;this.registers.list.push(h);}},pushStackLiteral:function(h){this.compileStack.push(new c(h));return h;},pushStack:function(h){this.source.push(this.incrStack()+" = "+h+";");this.compileStack.push("stack"+this.stackSlot);return"stack"+this.stackSlot;},replaceStack:function(i){var h=i.call(this,this.topStack());this.source.push(this.topStack()+" = "+h+";");return"stack"+this.stackSlot;},nextStack:function(h){var i=this.incrStack();this.compileStack.push("stack"+this.stackSlot);return i;},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot);}return"stack"+this.stackSlot;},popStack:function(){var h=this.compileStack.pop();if(h instanceof c){return h.value;}else{this.stackSlot--;return h;}},topStack:function(){var h=this.compileStack[this.compileStack.length-1];if(h instanceof c){return h.value;}else{return h;}},quotedString:function(h){return'"'+h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"';},setupHelper:function(k,i){var j=[];this.setupParams(k,j);var h=this.nameLookup("helpers",i,"helper");return{params:j,name:h,callParams:["depth0"].concat(j).join(", "),helperMissingParams:["depth0",this.quotedString(i)].concat(j).join(", ")};},setupParams:function(o,n){var k=[],p=[],m,h,j;k.push("hash:"+this.popStack());h=this.popStack();j=this.popStack();if(j||h){if(!j){this.context.aliases.self="this";j="self.noop";}if(!h){this.context.aliases.self="this";h="self.noop";}k.push("inverse:"+h);k.push("fn:"+j);}for(var l=0;l<o;l++){m=this.popStack();n.push(m);if(this.options.stringParams){p.push(this.popStack());}}if(this.options.stringParams){k.push("contexts:["+p.join(",")+"]");}if(this.options.data){k.push("data:data");}n.push("{"+k.join(",")+"}");return n.join(", ");}};var a=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var e=f.RESERVED_WORDS={};for(var d=0,b=a.length;d<b;d++){e[a[d]]=true;}f.isValidJavaScriptVariableName=function(h){if(!f.RESERVED_WORDS[h]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(h)){return true;}return false;};})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.precompile=function(d,c){c=c||{};var b=Handlebars.parse(d);var a=new Handlebars.Compiler().compile(b,c);return new Handlebars.JavaScriptCompiler().compile(a,c);};Handlebars.compile=function(b,a){a=a||{};var d;function c(){var g=Handlebars.parse(b);var f=new Handlebars.Compiler().compile(g,a);var e=new Handlebars.JavaScriptCompiler().compile(f,a,undefined,true);return Handlebars.template(e);}return function(f,e){if(!d){d=c();}return d.call(this,f,e);};};Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(d,e,f){var c=this.programs[d];if(f){return Handlebars.VM.program(e,f);}else{if(c){return c;}else{c=this.programs[d]=Handlebars.VM.program(e);return c;}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(d,c){c=c||{};return a.call(b,Handlebars,d,c.helpers,c.partials,c.data);};},programWithDepth:function(b,d,c){var a=Array.prototype.slice.call(arguments,2);return function(f,e){e=e||{};return b.apply(this,[f,e.data||d].concat(a));};},program:function(a,b){return function(d,c){c=c||{};return a(d,c.data||b);};},noop:function(){return"";},invokePartial:function(a,c,e,f,d,g){var b={helpers:f,partials:d,data:g};if(a===undefined){throw new Handlebars.Exception("The partial "+c+" could not be found");}else{if(a instanceof Function){return a(e,b);}else{if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+c+" could not be compiled when running in runtime-only mode");}else{d[c]=Handlebars.compile(a,{data:g!==undefined});return d[c](e,b);}}}}};Handlebars.template=Handlebars.VM.template;(function(a){if(typeof define==="function"&&define.amd){if(typeof jQuery!=="undefined"){define(["jquery"],a);}else{define([],a);}}else{if(typeof jQuery!=="undefined"){a(jQuery);}else{a();}}})(function(b,e){var q={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],p={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},l=Object.prototype.toString,s=/^[0-9]+$/;function o(u,x){var z=decodeURI(u),w=a[x||false?"strict":"loose"].exec(z),y={attr:{},param:{},seg:{}},v=14;while(v--){y.attr[t[v]]=w[v]||"";}y.param.query=f(y.attr.query);y.param.fragment=f(y.attr.fragment);y.seg.path=y.attr.path.replace(/^\/+|\/+$/g,"").split("/");y.seg.fragment=y.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");y.attr.base=y.attr.host?(y.attr.protocol?y.attr.protocol+"://"+y.attr.host:y.attr.host)+(y.attr.port?":"+y.attr.port:""):"";return y;}function m(v){var u=v.tagName;if(typeof u!=="undefined"){return q[u.toLowerCase()];}return u;}function c(x,w){if(x[w].length==0){return x[w]={};}var v={};for(var u in x[w]){v[u]=x[w][u];}x[w]=v;return v;}function k(y,w,v,z){var u=y.shift();if(!u){if(g(w[v])){w[v].push(z);}else{if("object"==typeof w[v]){w[v]=z;}else{if("undefined"==typeof w[v]){w[v]=z;}else{w[v]=[w[v],z];}}}}else{var x=w[v]=w[v]||[];if("]"==u){if(g(x)){if(""!=z){x.push(z);}}else{if("object"==typeof x){x[j(x).length]=z;}else{x=w[v]=[w[v],z];}}}else{if(~u.indexOf("]")){u=u.substr(0,u.length-1);if(!s.test(u)&&g(x)){x=c(w,v);}k(y,x,u,z);}else{if(!s.test(u)&&g(x)){x=c(w,v);}k(y,x,u,z);}}}}function d(y,x,B){if(~x.indexOf("]")){var A=x.split("["),u=A.length,z=u-1;k(A,y,"base",B);}else{if(!s.test(x)&&g(y.base)){var w={};for(var v in y.base){w[v]=y.base[v];}y.base=w;}i(y.base,x,B);}return y;}function f(u){return h(String(u).split(/&|;/),function(v,A){try{A=decodeURIComponent(A.replace(/\+/g," "));}catch(x){}var B=A.indexOf("="),z=n(A),w=A.substr(0,z||B),y=A.substr(z||B,A.length),y=y.substr(y.indexOf("=")+1,y.length);if(""==w){w=A,y="";}return d(v,w,y);},{base:{}}).base;}function i(x,w,y){var u=x[w];if(e===u){x[w]=y;}else{if(g(u)){u.push(y);}else{x[w]=[u,y];}}}function n(x){var u=x.length,w,y;for(var v=0;v<u;++v){y=x[v];if("]"==y){w=false;}if("["==y){w=true;}if("="==y&&!w){return v;}}}function h(y,v){var w=0,u=y.length>>0,x=arguments[2];while(w<u){if(w in y){x=v.call(e,x,y[w],w,y);}++w;}return x;}function g(u){return Object.prototype.toString.call(u)==="[object Array]";}function j(v){var u=[];for(prop in v){if(v.hasOwnProperty(prop)){u.push(prop);}}return u;}function r(u,v){if(arguments.length===1&&u===true){v=true;u=e;}v=v||false;u=u||window.location.toString();return{data:o(u,v),attr:function(w){w=p[w]||w;return typeof w!=="undefined"?this.data.attr[w]:this.data.attr;},param:function(w){return typeof w!=="undefined"?this.data.param.query[w]:this.data.param.query;},fparam:function(w){return typeof w!=="undefined"?this.data.param.fragment[w]:this.data.param.fragment;},segment:function(w){if(typeof w==="undefined"){return this.data.seg.path;}else{w=w<0?this.data.seg.path.length+w:w-1;return this.data.seg.path[w];}},fsegment:function(w){if(typeof w==="undefined"){return this.data.seg.fragment;}else{w=w<0?this.data.seg.fragment.length+w:w-1;return this.data.seg.fragment[w];}}};}if(typeof b!=="undefined"){b.fn.url=function(v){var u="";if(this.length){u=b(this).attr(m(this[0]))||"";}return r(u,v);};b.url=r;}else{window.purl=r;}});(function(){var a,f,d,c,b,e;$(document).ready(function(){$(".akvo_map").each(function(){var g=$(this).attr("id");a({mapId:g,mapElement:document.getElementById(g),mapOpts:window[g]});});});a=function(g){$(g.mapElement).gmap(c(g.mapOpts.type)).bind("init",function(){$.ajax({url:e(g),dataType:"jsonp",jsonp:"callback",jsonpCallback:"callback",cache:true,success:function(h){d(g,h);}});});};e=function(j){var i,h,g;i=j.mapOpts;h=i.host+"/api/v1/"+i.resource+"/";g=100;if(i.object_id){h+=i.object_id+"/?format=jsonp&depth=1";}else{h+="?format=jsonp&limit="+g;}return h;};d=function(n,l){var k,j,i,m,h;j=n.mapOpts;if(j.object_id===""){k=l.objects;}else{k=[l];}i=Handlebars.compile('<div class="mapInfoWindow" style="height:150px; min-height:150px; max-height:150px; overflow:hidden;"><a class="small" href="{{url}}">{{title}}</a>{{#if thumb}}<div style="text-align: center; margin-top: 5px;"><a href="{{url}}" title="{{title}}"><img src="{{thumb}}" alt=""></a></div>{{/if}}</div>');m=function(p,o){o.url=p.absolute_url;o.title=p.name;try{o.thumb=p.logo.thumbnails.map_thumb;}catch(q){o.thumb="";}return o;};h=function(p,o){o.url=p.absolute_url;o.title=p.title;try{o.thumb=p.current_image.thumbnails.map_thumb;}catch(q){o.thumb="";}return o;};$.each(k,function(q,p){if(j.object_id){$.each(p.locations,function(s,r){if(j.resource==="map_for_organisation"){r=m(p,r);}else{r=h(p,r);}f(n,r,i);});}else{var o;o=p.primary_location;if(o){if(j.resource==="map_for_organisation"){o=m(p,o);}else{o=h(p,o);}f(n,o,i);}}});if(j.type==="dynamic"||j.type==="static"){var g=new google.maps.LatLng(0,0);$(n.mapElement).gmap("get","map").setCenter(g);}if(isNaN(j.object)&&l.meta.next!==null){b(n,l.meta.next);}};f=function(k,h,i){var g,j;j=k.mapOpts;g=j.host+j.media_url+"core/img/";if(j.marker_icon){g=g+j.marker_icon;}else{if(j.resource==="map_for_organisation"){g=g+"redMarker.png";}else{g=g+"blueMarker.png";}}if(j.type==="static"||j.type==="small"){if(j.type==="static"){g=new google.maps.MarkerImage(g,null,null,null,new google.maps.Size(10.5,17));}$(k.mapElement).gmap("addMarker",{position:new google.maps.LatLng(h.latitude,h.longitude),clickable:false,icon:g,bounds:true});if($(k.mapElement).gmap("get","map").getZoom()>8){$(k.mapElement).gmap("get","map").setZoom(8);}}else{$(k.mapElement).gmap("addMarker",{position:new google.maps.LatLng(h.latitude,h.longitude),icon:g,bounds:true}).click(function(){$(k.mapElement).gmap("openInfoWindow",{content:i(h)},this);});}};b=function(k,i){var g=$.url(i),h=Handlebars.compile("{{host}}{{path}}?format=jsonp&depth=1&limit={{limit}}&offset={{offset}}"),j=h({host:g.attr("host"),path:g.attr("path"),limit:Number(g.param("limit")),offset:Number(g.param("offset"))});$.ajax({url:j,dataType:"jsonp",jsonp:"callback",jsonpCallback:"callback",cache:true,success:function(l){d(k,l);}});};c=function(h){var g;if(h==="static"){g={draggable:false,mapTypeControl:false,navigationControl:true,scaleControl:false,scrollwheel:false,streetViewControl:false,zoom:0,zoomControl:false};}else{if(h==="small"){g={draggable:true,mapTypeControl:false,navigationControl:true,scaleControl:true,scrollwheel:false,streetViewControl:false,zoom:0};}else{g={draggable:true,mapTypeControl:true,navigationControl:true,scaleControl:true,scrollwheel:true,streetViewControl:false,zoom:3,minZoom:2};}}return g;};}());