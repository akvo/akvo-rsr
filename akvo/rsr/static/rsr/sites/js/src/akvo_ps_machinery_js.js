function getHeight(a){switch(a){case"feature-side":return 840;case"project-contribute":return 570;case"project-small":return 312;case"project-updates":return 900;case"project-list":return 730;case"project-map":return 300;case"project-narrow":return 840;case"cobranded-narrow":return 911;case"cobranded-short":return 627;case"cobranded-banner":return 234;case"cobranded-leader":return 207;default:return 840;}}function getWidth(a){switch(a){case"feature-side":return 202;case"project-contribute":return 202;case"project-small":return 170;case"project-updates":return 202;case"project-list":return 745;case"project-map":return 600;case"project-narrow":return 170;case"cobranded-narrow":return 170;case"cobranded-short":return 170;case"cobranded-banner":return 468;case"cobranded-leader":return 728;default:return 202;}}function hex_validator(b){var a=/^([0-9a-f]{1,2}){3}$/i;return a.test(b);}function preview_widget(){var l="";var a=true;var p="";if(jQ("#backgroundcolor_pulldown").val()=="x"){p=jQ("#backgroundcolor_text").val();}else{p=jQ("#backgroundcolor_pulldown").val();}if(!(p.length==3||p.length==6)){l+=error1+".<br />";a=false;}else{if(!hex_validator(p)){l+=error2+".<br />";a=false;}}if(akvo_widget_type!="project-map"){var c="";if(jQ("#textcolor_pulldown").val()=="x"){c=jQ("#textcolor_text").val();}else{c=jQ("#textcolor_pulldown").val();}if(!(c.length==3||c.length==6)){jQ("#warning_color").animate({opacity:"show"},"slow");l+=error3+".<br />";a=false;}else{if(!hex_validator(c)){l+=error4+".<br />";a=false;}}}var b=jQ("#akvo_widget_container");var n=jQ("#code");jQ("#warning_color").animate({opacity:"hide"},"fast");if(!a){jQ("#warning_color").html(l);jQ("#warning_color").animate({opacity:"show"},"slow");b.innerHTML="";n.val("");return;}var q="";var i="";var f="";if(akvo_widget_type=="project-map"){q=jQ("#widget_height").val();i=jQ("#widget_width").val();f=jQ("input:radio[name=map_state]:checked").val();}var m=getHeight(akvo_widget_type);var o=getWidth(akvo_widget_type);var h="";var d=akvo_host+"/widgets/projects/map/";d=d+"?bgcolor="+p;d=d+"&height="+q+"&width="+i+"&state="+f;var e=document.createElement("IFRAME");if(akvo_widget_type!="project-map"){var k=document.getElementById("jswidget");if(k){k.src=d;}else{e.setAttribute("src",d);e.height=m;e.width=o;e.frameBorder=0;e.setAttribute("allowTransparency","true");e.setAttribute("id","jswidget");jQ("#akvo_widget_container").append(e);}}else{var g=jQ("#jswidget");if(g){g.remove();console.log("Removed old widget");}e.setAttribute("src",d);e.height=q;e.width=i;e.frameBorder=0;e.setAttribute("allowTransparency","true");e.setAttribute("id","jswidget");jQ("#akvo_widget_container").append(e);}var j='<iframe src="'+d+'" ';if(akvo_widget_type!="project-map"){j+='height="'+m+'" width="'+o+'" frameborder="0" allowTransparency="true"> </iframe>';}else{j+='height="'+q+'" width="'+i+'" frameborder="0" allowTransparency="true"> </iframe>';}n.val(j);}