{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts-src/my-user-management.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Button","MenuItem","Modal","SplitButton","Table","initial_employment_data","orgAdmin","organisation_data","roles","i18n","csrftoken","cookieValue","document","cookie","cookies","split","length","trim","substring","decodeURIComponent","getCookie","initReact","ReactBootstrap","InviteRow","React","createClass","displayName","getInitialState","button_text","button_style","handleRowClick","this","state","props","addRow","setState","deleteRow","rowId","render","orgs","map","org","createElement","id","all_roles","role","thisButton","bsStyle","onClick","className","type","placeholder","email_text","maxLength","required","defaultValue","select_org_text","select_role_text","InviteTable","rows","currentRows","max","push","splice","thisTable","row","striped","organisations_text","role_text","InviteModal","disable","successes","showModal","close","open","inviteApiCall","email","thisModal","request","XMLHttpRequest","setRequestHeader","onload","status","classList","add","button","querySelector","parentNode","removeChild","setTimeout","querySelectorAll","missingData","JSON","parse","responseText","missing_data","fields","field","data","stringify","organisation","group","send","sendInvite","inviteRows","getElementById","inviteRow","emailInput","orgInput","roleInput","thisInviteModal","modalButton","show","onHide","bsSize","Header","closeButton","Title","invite_users_text","Body","invite_users_heading","Footer","close_text","disabled","DeleteModal","showButton","componentDidMount","employment","is_approved","isMounted","deleteEmployment","$","ajax","url","success","handleDelete","error","xhr","err","console","toString","onDeleteToggle","remove_user_text","remove_text","user","first_name","last_name","from_text","remove_button_text","ApproveModal","approved","onApprove","approveEmployment","handleApprove","approve_user_text","approve_text","at_text","approve_button_text","Employment","country","job_title","text","in_text","visible","button_title","none_text","loading","isLoading","boolean","onDelete","setGroupName","disableButton","thisEmployment","employment_id","old_title","other_groups","loadIcon","eventKey","onSelect","json_response","e","statusText","title","employment_exists","EmploymentRow","label","roleCell","can_be_restricted","is_restricted","edit_access","restricted_count","restrict_access","user_with_id","href","UserTable","employments","source","employments_table","emailCell","nameCell","organisationCell","projectsCell","project_access","roleNameCell","tableRow","tableHead","tableBody","ReactDOM","loadJS","implementationCode","location","scriptTag","src","onreadystatechange","appendChild","addEventListener","innerHTML","org_admin","loadReactBootstrap","reactBootstrapSrc","body","log","reactSrc","reactDOMSrc","loadAndRenderReact"],"mappings":"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","file":"myUserManagement.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1063);\n","// Akvo RSR is covered by the GNU Affero General Public License.\n// See more details in the license.txt file located at the root folder of the\n// Akvo RSR module. For additional details on the GNU license please see\n// < http://www.gnu.org/licenses/agpl.html >.\n\nvar Button,\n    MenuItem,\n    Modal,\n    SplitButton,\n    Table,\n    initial_employment_data,\n    orgAdmin,\n    organisation_data,\n    roles,\n    i18n;\n\n// CSRF TOKEN\nfunction getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n        var cookies = document.cookie.split(\";\");\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i].trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) == name + \"=\") {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\nvar csrftoken = getCookie(\"csrftoken\");\n\nfunction initReact() {\n    // Load globals\n    Button = ReactBootstrap.Button;\n    MenuItem = ReactBootstrap.MenuItem;\n    Modal = ReactBootstrap.Modal;\n    SplitButton = ReactBootstrap.SplitButton;\n    Table = ReactBootstrap.Table;\n\n    var InviteRow = React.createClass({\n        getInitialState: function() {\n            return {\n                button_text: \"+\",\n                button_style: \"success\"\n            };\n        },\n\n        handleRowClick: function() {\n            if (this.state.button_style === \"success\") {\n                this.props.addRow();\n                this.setState({\n                    button_text: \"x\",\n                    button_style: \"danger\"\n                });\n            } else {\n                this.props.deleteRow(this.props.rowId);\n            }\n        },\n\n        render: function() {\n            var orgs = organisation_data.map(function(org) {\n                return (\n                    <option key={org.id} value={org.id}>\n                        {org.name}\n                    </option>\n                );\n            });\n\n            var all_roles = roles.map(function(role) {\n                return (\n                    <option key={role.id} value={role.id}>\n                        {role.name}\n                    </option>\n                );\n            });\n\n            var thisButton = React.createElement(\n                Button,\n                {\n                    bsStyle: this.state.button_style,\n                    onClick: this.handleRowClick\n                },\n                this.state.button_text\n            );\n\n            return (\n                <tr className=\"invite-row\">\n                    <td>\n                        <input\n                            className=\"form-control\"\n                            type=\"email\"\n                            placeholder={i18n.email_text}\n                            maxLength=\"254\"\n                            required=\"required\"\n                        />\n                    </td>\n                    <td>\n                        <select className=\"form-control org-select\" defaultValue=\"\">\n                            <option value=\"\">{i18n.select_org_text}</option>\n                            {orgs}\n                        </select>\n                    </td>\n                    <td>\n                        <select className=\"form-control role-select\" defaultValue=\"\">\n                            <option value=\"\">{i18n.select_role_text}</option>\n                            {all_roles}\n                        </select>\n                    </td>\n                    <td>{thisButton}</td>\n                </tr>\n            );\n        }\n    });\n\n    var InviteTable = React.createClass({\n        getInitialState: function() {\n            return {\n                rows: [0]\n            };\n        },\n\n        addRow: function() {\n            var currentRows = this.state.rows;\n            var max = 0;\n            for (var i = 0; i < currentRows.length; i++) {\n                if (currentRows[i] > max) {\n                    max = currentRows[i];\n                }\n            }\n            currentRows.push(max + 1);\n\n            this.setState({ rows: currentRows });\n        },\n\n        deleteRow: function(key) {\n            var currentRows = this.state.rows;\n            for (var i = 0; i < currentRows.length; i++) {\n                if (currentRows[i] === key) {\n                    currentRows.splice(i, 1);\n\n                    this.setState({ rows: currentRows });\n                    break;\n                }\n            }\n        },\n\n        render: function() {\n            var thisTable = this;\n\n            var rows = this.state.rows.map(function(row) {\n                return React.createElement(InviteRow, {\n                    key: row,\n                    rowId: row,\n                    addRow: thisTable.addRow,\n                    deleteRow: thisTable.deleteRow\n                });\n            });\n\n            return React.createElement(\n                Table,\n                { striped: true, id: \"invite-table\" },\n                React.createElement(\n                    \"thead\",\n                    null,\n                    React.createElement(\n                        \"tr\",\n                        null,\n                        React.createElement(\"th\", null, i18n.email_text),\n                        React.createElement(\"th\", null, i18n.organisations_text),\n                        React.createElement(\"th\", null, i18n.role_text),\n                        React.createElement(\"th\")\n                    )\n                ),\n                React.createElement(\"tbody\", null, rows)\n            );\n        }\n    });\n\n    var InviteModal = React.createClass({\n        getInitialState: function() {\n            return {\n                disable: false,\n                successes: 0,\n                showModal: false\n            };\n        },\n\n        close: function() {\n            this.setState({\n                showModal: false\n            });\n        },\n\n        open: function() {\n            this.setState({\n                showModal: true\n            });\n        },\n\n        inviteApiCall: function(email, org, role, row) {\n            var thisModal = this;\n\n            if (email === \"\" && org === \"\" && role === \"\") {\n                // Row without any data, ignore\n            } else {\n                // Create request\n                var url = \"/rest/v1/invite_user/?format=json\";\n\n                var request = new XMLHttpRequest();\n                request.open(\"POST\", url, true);\n                request.setRequestHeader(\"X-CSRFToken\", csrftoken);\n                request.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n                request.onload = function() {\n                    var status = request.status;\n\n                    if (status === 201) {\n                        // Remove row\n                        row.classList.add(\"has-success\");\n                        var button = row.querySelector(\"button\");\n                        button.parentNode.removeChild(button);\n                        setTimeout(function() {\n                            if (row.parentNode.querySelectorAll(\"tr\").length === 1) {\n                                // Only one row left, close modal\n                                thisModal.close();\n                            }\n                            row.parentNode.removeChild(row);\n                        }, 3000);\n                    } else if (status === 400) {\n                        // Missing data\n                        var missingData = JSON.parse(request.responseText).missing_data;\n                        for (var i = 0; i < missingData.length; i++) {\n                            var fields = row.querySelectorAll(\"td\");\n                            var field = missingData[i];\n                            if (field === \"email\") {\n                                fields[0].classList.add(\"has-error\");\n                            } else if (field === \"organisation\") {\n                                fields[1].classList.add(\"has-error\");\n                            } else if (field === \"group\") {\n                                fields[2].classList.add(\"has-error\");\n                            }\n                        }\n                    } else {\n                        // Forbidden or general error\n                        row.classList.add(\"has-error\");\n                    }\n                };\n\n                var data =\n                    \"user_data=\" +\n                    JSON.stringify({\n                        email: email,\n                        organisation: org,\n                        group: role\n                    });\n\n                request.send(data);\n            }\n        },\n\n        sendInvite: function() {\n            // Disable invite button\n            this.setState({\n                disable: true\n            });\n\n            var inviteTable = document.getElementById(\"invite-table\");\n            var inviteRows = inviteTable.querySelectorAll(\".invite-row\");\n            for (var i = 0; i < inviteRows.length; i++) {\n                var inviteRow = inviteRows[i];\n                var emailInput = inviteRow.querySelector(\"input\").value;\n                var orgInput = inviteRow.querySelector(\".org-select\").value;\n                var roleInput = inviteRow.querySelector(\".role-select\").value;\n                this.inviteApiCall(emailInput, orgInput, roleInput, inviteRow);\n            }\n\n            // Enable invite button again\n            var thisInviteModal = this;\n            setTimeout(function() {\n                thisInviteModal.setState({\n                    disable: false\n                });\n            }, 5000);\n        },\n\n        render: function() {\n            var modalButton = React.createElement(\n                Button,\n                {\n                    className: \"btn btn-default btn-sm\",\n                    onClick: this.open\n                },\n                React.createElement(\"i\", { className: \"glyphicon glyphicon-user\" }),\n                \" +\"\n            );\n\n            var thisModal = React.createElement(\n                Modal,\n                {\n                    show: this.state.showModal,\n                    onHide: this.close,\n                    bsSize: \"large\"\n                },\n                React.createElement(\n                    Modal.Header,\n                    { closeButton: true },\n                    React.createElement(Modal.Title, null, i18n.invite_users_text)\n                ),\n                React.createElement(\n                    Modal.Body,\n                    null,\n                    i18n.invite_users_heading,\n                    React.createElement(\"hr\"),\n                    React.createElement(InviteTable)\n                ),\n                React.createElement(\n                    Modal.Footer,\n                    null,\n                    React.createElement(Button, { onClick: this.close }, i18n.close_text),\n                    React.createElement(\n                        Button,\n                        {\n                            onClick: this.sendInvite,\n                            bsStyle: \"success\",\n                            disabled: this.state.disable\n                        },\n                        i18n.invite_users_text\n                    )\n                )\n            );\n\n            return (\n                <div>\n                    {modalButton}\n                    {thisModal}\n                </div>\n            );\n        }\n    });\n\n    var DeleteModal = React.createClass({\n        getInitialState: function() {\n            return {\n                showModal: false,\n                showButton: false\n            };\n        },\n\n        componentDidMount: function() {\n            var approved = this.props.employment.is_approved;\n            if (this.isMounted()) {\n                this.setState({\n                    showButton: true\n                });\n            }\n        },\n\n        close: function() {\n            this.setState({\n                showModal: false\n            });\n        },\n\n        open: function() {\n            this.setState({\n                showModal: true\n            });\n        },\n\n        deleteEmployment: function() {\n            $.ajax({\n                type: \"DELETE\",\n                url: \"/rest/v1/employment/\" + this.props.employment.id + \"/?format=json\",\n                success: function(data) {\n                    this.handleDelete();\n                }.bind(this),\n                error: function(xhr, status, err) {\n                    console.error(this.props.url, status, err.toString());\n                }.bind(this)\n            });\n        },\n\n        handleDelete: function() {\n            this.props.onDeleteToggle();\n        },\n\n        render: function() {\n            var modalButton;\n\n            if (!this.state.showButton) {\n                modalButton = React.createElement(\"span\");\n            } else {\n                modalButton = React.createElement(\n                    Button,\n                    { bsStyle: \"danger\", bsSize: \"xsmall\", onClick: this.open },\n                    \"X\"\n                );\n            }\n\n            var thisModal = React.createElement(\n                Modal,\n                {\n                    show: this.state.showModal,\n                    onHide: this.close,\n                    employment: this.props.employment,\n                    onDeleteToggle: this.props.onDeleteToggle\n                },\n                React.createElement(\n                    Modal.Header,\n                    { closeButton: true },\n                    React.createElement(Modal.Title, null, i18n.remove_user_text)\n                ),\n                React.createElement(\n                    Modal.Body,\n                    null,\n                    i18n.remove_text +\n                        \" \" +\n                        this.props.employment.user.first_name +\n                        \" \" +\n                        this.props.employment.user.last_name +\n                        \" \" +\n                        i18n.from_text +\n                        \" \" +\n                        this.props.employment.organisation.name +\n                        \"?\"\n                ),\n                React.createElement(\n                    Modal.Footer,\n                    null,\n                    React.createElement(Button, { onClick: this.close }, i18n.close_text),\n                    React.createElement(\n                        Button,\n                        { onClick: this.deleteEmployment, bsStyle: \"danger\" },\n                        i18n.remove_button_text\n                    )\n                )\n            );\n            var group = this.props.employment.group;\n            if (group && group.name === \"Admins\" && !orgAdmin) {\n                return <span />;\n            } else {\n                return (\n                    <span>\n                        {modalButton}\n                        {thisModal}\n                    </span>\n                );\n            }\n        }\n    });\n\n    var ApproveModal = React.createClass({\n        getInitialState: function() {\n            return {\n                showModal: false,\n                showButton: false\n            };\n        },\n\n        componentDidMount: function() {\n            var approved = this.props.employment.is_approved;\n            this.setState({\n                showButton: !approved\n            });\n        },\n\n        close: function() {\n            this.setState({\n                showModal: false\n            });\n        },\n\n        open: function() {\n            this.setState({\n                showModal: true\n            });\n        },\n\n        onApprove: function() {\n            this.setState({\n                showButton: false\n            });\n        },\n\n        approveEmployment: function() {\n            var thisModal = this;\n\n            $.ajax({\n                type: \"POST\",\n                url: \"/rest/v1/employment/\" + this.props.employment.id + \"/approve/?format=json\",\n                success: function(data) {\n                    thisModal.handleApprove();\n                }.bind(this),\n                error: function(xhr, status, err) {\n                    console.error(this.props.url, status, err.toString());\n                }.bind(this)\n            });\n        },\n\n        handleApprove: function() {\n            this.onApprove();\n            this.close();\n        },\n\n        render: function() {\n            var modalButton;\n\n            if (!this.state.showButton) {\n                modalButton = React.createElement(\"span\");\n            } else {\n                modalButton = React.createElement(\n                    Button,\n                    { bsStyle: \"success\", bsSize: \"xsmall\", onClick: this.open },\n                    \"\\u221A\"\n                );\n            }\n\n            var thisModal = React.createElement(\n                Modal,\n                {\n                    show: this.state.showModal,\n                    onHide: this.close\n                },\n                React.createElement(\n                    Modal.Header,\n                    { closeButton: true },\n                    React.createElement(Modal.Title, null, i18n.approve_user_text)\n                ),\n                React.createElement(\n                    Modal.Body,\n                    null,\n                    i18n.approve_text +\n                        \" \" +\n                        this.props.employment.user.first_name +\n                        \" \" +\n                        this.props.employment.user.last_name +\n                        \" \" +\n                        i18n.at_text +\n                        \" \" +\n                        this.props.employment.organisation.name +\n                        \"?\"\n                ),\n                React.createElement(\n                    Modal.Footer,\n                    null,\n                    React.createElement(Button, { onClick: this.close }, i18n.close_text),\n                    React.createElement(\n                        Button,\n                        { onClick: this.approveEmployment, bsStyle: \"success\" },\n                        i18n.approve_button_text\n                    )\n                )\n            );\n\n            var group = this.props.employment.group;\n            if (group && group.name === \"Admins\" && !orgAdmin) {\n                return <span />;\n            } else {\n                return (\n                    <span>\n                        {modalButton}\n                        {thisModal}\n                    </span>\n                );\n            }\n        }\n    });\n\n    var CountryJobTitle = React.createClass({\n        render: function() {\n            var country = this.props.country;\n            var job_title = this.props.job_title;\n            if (country === \"\" && job_title === \"\") {\n                return <span>&nbsp;</span>;\n            } else {\n                var text = \"(\";\n                if (job_title !== \"\") {\n                    text += job_title;\n                }\n                if (country !== \"\") {\n                    if (job_title !== \"\") {\n                        text += \" \";\n                    }\n                    text += i18n.in_text + \" \" + country;\n                }\n                text += \")\";\n                return <span className=\"small\">{text}&nbsp; &nbsp;</span>;\n            }\n        }\n    });\n\n    var Employment = React.createClass({\n        getInitialState: function() {\n            return {\n                visible: true,\n                error: false,\n                button_title: \"(\" + i18n.none_text + \")\",\n                loading: false\n            };\n        },\n\n        componentDidMount: function() {\n            var group = this.props.employment.group;\n            if (this.isMounted() && group !== null) {\n                this.setState({\n                    button_title: group.name\n                });\n            }\n        },\n\n        isLoading: function(boolean) {\n            this.setState({\n                loading: boolean\n            });\n        },\n\n        onDelete: function() {\n            this.setState({ visible: false });\n        },\n\n        setGroupName: function(group) {\n            this.setState({\n                button_title: group\n            });\n        },\n\n        disableButton: function() {\n            var group = this.props.employment.group;\n            return this.state.loading || (group && group.name === \"Admins\" && !orgAdmin);\n        },\n\n        render: function() {\n            var thisEmployment = this;\n            var employment_id = this.props.employment.id;\n            var setGroupName = this.setGroupName;\n            var old_title = this.state.button_title;\n            var loading = this.isLoading;\n\n            var other_groups = this.props.employment.other_groups.map(function(group) {\n                function setGroup() {\n                    loading(true);\n                    $.ajax({\n                        type: \"POST\",\n                        url:\n                            \"/rest/v1/employment/\" +\n                            employment_id +\n                            \"/set_group/\" +\n                            group.id +\n                            \"/?format=json\",\n                        success: function(data) {\n                            setGroupName(group.name);\n                            thisEmployment.setState({ error: false });\n                            loading(false);\n                        }.bind(this),\n                        error: function(xhr, status, err) {\n                            setGroupName(old_title);\n                            loading(false);\n                            var json_response;\n                            try {\n                                json_response = JSON.parse(xhr.responseText);\n                            } catch (e) {\n                                json_response = { error: xhr.statusText || e };\n                            }\n                            if (json_response.error == \"Employment already exists.\") {\n                                thisEmployment.setState({ error: true });\n                            }\n                        }.bind(this)\n                    });\n                }\n\n                var loadIcon;\n                if (thisEmployment.state.loading) {\n                    loadIcon = React.createElement(\"i\", { className: \"fa fa-spin fa-spinner\" });\n                } else {\n                    loadIcon = React.createElement(\"span\");\n                }\n\n                return React.createElement(\n                    MenuItem,\n                    {\n                        eventKey: group.id,\n                        key: group.id,\n                        onSelect: setGroup\n                    },\n                    loadIcon,\n                    group.name\n                );\n            });\n\n            if (!this.state.visible) {\n                return React.createElement(\"span\");\n            } else if (thisEmployment.state.error) {\n                return React.createElement(\n                    \"span\",\n                    null,\n                    React.createElement(\n                        SplitButton,\n                        {\n                            id: employment_id,\n                            title: this.state.button_title,\n                            disabled: this.disableButton()\n                        },\n                        other_groups\n                    ),\n                    \"  \",\n                    React.createElement(DeleteModal, {\n                        employment: this.props.employment,\n                        onDeleteToggle: this.onDelete\n                    }),\n                    \" \",\n                    React.createElement(ApproveModal, {\n                        employment: this.props.employment\n                    }),\n                    React.createElement(\"br\"),\n                    React.createElement(\n                        \"span\",\n                        { className: \"employment-error\" },\n                        i18n.employment_exists\n                    )\n                );\n            } else {\n                return React.createElement(\n                    \"span\",\n                    null,\n                    React.createElement(\n                        SplitButton,\n                        {\n                            id: employment_id,\n                            title: this.state.button_title,\n                            disabled: this.disableButton()\n                        },\n                        other_groups\n                    ),\n                    \"  \",\n                    React.createElement(DeleteModal, {\n                        employment: this.props.employment,\n                        onDeleteToggle: this.onDelete\n                    }),\n                    \" \",\n                    React.createElement(ApproveModal, {\n                        employment: this.props.employment\n                    })\n                );\n            }\n        }\n    });\n\n\n    var EmploymentRow = React.createClass({\n        render: function() {\n            var employment = this.props.employment;\n            var user = employment.user;\n            var roleCell = React.createElement(Employment, {\n                employment: employment,\n                key: employment.id\n            });\n            var label;\n            if (user.can_be_restricted) {\n                if (user.is_restricted) {\n                    label = i18n.edit_access + \" (\" + user.restricted_count + \")\";\n                } else {\n                    label = i18n.restrict_access\n                }\n            }\n            return (\n                <tr>\n                    <td>{user.email}</td>\n                    {user.first_name || user.last_name ?\n                        <td>{user.first_name} {user.last_name}</td>\n                        :\n                        <td>{i18n.user_with_id}{user.id}</td>\n\n                    }\n                    <td>{employment.organisation.name}</td>\n                    {user.can_be_restricted\n                        ? <td>\n                            <a href={'/myrsr/user_projects/' + user.id + '/'}>\n                                {label}\n                            </a>\n                        </td>\n                        : <td></td>}\n                    <td className=\"text-right\">{roleCell}</td>\n                </tr>\n            );\n        }\n    });\n\n    var UserTable = React.createClass({\n        getInitialState: function() {\n            return {\n                employments: []\n            };\n        },\n\n        componentDidMount: function() {\n            var employments = this.props.source;\n            if (this.isMounted()) {\n                this.setState({\n                    employments: employments\n                });\n            }\n        },\n\n        render: function() {\n            var employments_table = this.state.employments.map(function(employment) {\n\n                return React.createElement(EmploymentRow, {\n                    key: employment.id,\n                    employment: employment\n                });\n            });\n\n            var emailCell = React.createElement('th', null, i18n.email_text);\n            var nameCell = React.createElement('th', null, i18n.name);\n            var organisationCell = React.createElement('th', null, i18n.organisation);\n            var projectsCell = React.createElement('th', null, i18n.project_access);\n            var roleNameCell = React.createElement(\"th\", {className: \"text-right\"}, i18n.role_text);\n\n            var tableRow = React.createElement('tr', null, emailCell, nameCell, organisationCell, projectsCell, roleNameCell);\n            var tableHead = React.createElement('thead', null, tableRow);\n            var tableBody = React.createElement('tbody', null, employments_table);\n\n            return React.createElement(Table, { striped: true }, tableHead, tableBody);\n        }\n    });\n\n    ReactDOM.render(\n        React.createElement(UserTable, { source: initial_employment_data }),\n        document.getElementById(\"user_table\")\n    );\n\n    ReactDOM.render(React.createElement(InviteModal), document.getElementById(\"invite_button\"));\n}\n\nvar loadJS = function(url, implementationCode, location) {\n    //url is URL of external file, implementationCode is the code\n    //to be called from the file, location is the location to\n    //insert the <script> element\n\n    var scriptTag = document.createElement(\"script\");\n    scriptTag.src = url;\n\n    scriptTag.onload = implementationCode;\n    scriptTag.onreadystatechange = implementationCode;\n\n    location.appendChild(scriptTag);\n};\n\nfunction loadAndRenderReact() {\n    function loadReactBootstrap() {\n        var reactBootstrapSrc = document.getElementById(\"react-bootstrap\").src;\n        loadJS(reactBootstrapSrc, initReact, document.body);\n    }\n\n    function loadReactDOM() {\n        var reactDOMSrc = document.getElementById(\"react-dom\").src;\n        loadJS(reactDOMSrc, loadReactBootstrap, document.body);\n    }\n\n    console.log(\"No React, load again.\");\n    var reactSrc = document.getElementById(\"react\").src;\n    loadJS(reactSrc, loadReactDOM, document.body);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    // Initial data\n    initial_employment_data = JSON.parse(\n        document.getElementById(\"initial-employment-data\").innerHTML\n    );\n    orgAdmin = JSON.parse(document.getElementById(\"org-admin\").innerHTML).org_admin;\n    organisation_data = JSON.parse(document.getElementById(\"organisation-data\").innerHTML);\n    roles = JSON.parse(document.getElementById(\"roles\").innerHTML);\n    i18n = JSON.parse(document.getElementById(\"user-management-text\").innerHTML);\n\n    // Check if React is loaded\n    if (\n        typeof React !== \"undefined\" &&\n        typeof ReactDOM !== \"undefined\" &&\n        typeof ReactBootstrap !== \"undefined\"\n    ) {\n        // Render React components\n        initReact();\n    } else {\n        loadAndRenderReact();\n    }\n});\n"],"sourceRoot":""}