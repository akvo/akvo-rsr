{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts-src/my-details-employments.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","countries","i18n","initial_data","organisations","request_link","Typeahead","orgsAPIUrl","countriesAPIUrl","csrftoken","cookieValue","document","cookie","cookies","split","length","trim","substring","decodeURIComponent","getCookie","getOrgsandCountries","xmlHttpOrgs","XMLHttpRequest","onreadystatechange","readyState","DONE","status","orgResult","JSON","parse","responseText","orgResults","results","forEach","short","long","newName","long_name","filterOption","displayOption","xmlHttpCountries","countriesResult","ReactTypeahead","Employment","React","createClass","displayName","getInitialState","visible","deleting","handleDelete","this","setState","xmlHttp","thisEmployment","props","removeEmployment","employment","id","open","setRequestHeader","send","render","state","createElement","deleteButton","className","style","cursor","onClick","is_approved","groupName","group","slice","employmentNode","organisation_full","notApproved","not_approved_text","EmploymentList","thisEmploymentList","employments","map","job","OrganisationInput","typeaheadCallback","option","getElementById","setAttribute","inputProps","loading","disabled","orgTypeahead","placeholder","organisation_text","maxVisible","options","onOptionSelected","customClasses","input","createFactory","div","orgError","ErrorNode","errorText","CountryInput","code","countryTypeahead","country_text","JobTitleInput","type","job_title_text","jobTitleInput","FormButton","handleAddEmployment","addEmployment","loadingIcon","button","sending_request_text","request_join_text","AddEmploymentForm","buttonText","showError","checkExistingEmployment","organisationId","existingEmployment","getFormData","organisation","getAttribute","country","job_title","formData","required_text","parseInt","already_connected_text","err","not_connected_text","thisForm","response","link","stringify","heading","connect_employer_text","errorMessage","orgInput","countryInput","formButton","form","EmploymentApp","componentDidMount","isMounted","concat","employmentId","splice","icon","my_organisations_text","employmentList","addEmploymentForm","org_link","country_link","ReactDOM","user","org_rest_link","country_rest_link","buildEmploymentsApp","loadJS","url","implementationCode","location","scriptTag","src","onload","appendChild","addEventListener","innerHTML","loadReactTypeahead","reactTypeaheadSrc","body","console","log","reactSrc","reactDOMSrc","loadAndRenderReact"],"mappings":"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","file":"myDetailsEmployments.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1060);\n","// Akvo RSR is covered by the GNU Affero General Public License.\n// See more details in the license.txt file located at the root folder of the\n// Akvo RSR module. For additional details on the GNU license please see\n// < http://www.gnu.org/licenses/agpl.html >.\n\n\n/* Global variables */\nvar countries,\n    i18n,\n    initial_data,\n    organisations,\n    request_link,\n    Typeahead;\n\nvar orgsAPIUrl = '/rest/v1/typeaheads/organisations?format=json',\n    countriesAPIUrl = '/rest/v1/typeaheads/countries?format=json';\n\n// CSRF TOKEN\nfunction getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i].trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\nvar csrftoken = getCookie('csrftoken');\n\n/* Build React components of Employments app */\nfunction buildEmploymentsApp() {\n    // Load globals\n    Typeahead = ReactTypeahead.Typeahead;\n\n    var Employment = React.createClass({\n        getInitialState: function() {\n            return {\n                visible: true,\n                deleting: false\n            };\n        },\n\n        handleDelete: function() {\n            // Delete current employment\n            this.setState({deleting: true});\n\n            var xmlHttp = new XMLHttpRequest();\n            var thisEmployment = this;\n            xmlHttp.onreadystatechange = function() {\n                if (xmlHttp.readyState == XMLHttpRequest.DONE) {\n                    thisEmployment.setState({deleting: false});\n                    if (xmlHttp.status >= 200 && xmlHttp.status < 400){\n                        thisEmployment.props.removeEmployment(thisEmployment.props.employment.id);\n                        return false;\n                    }\n                }\n            };\n            xmlHttp.open(\"DELETE\", \"/rest/v1/employment/\" + this.props.employment.id + \"/\", true);\n            xmlHttp.setRequestHeader(\"X-CSRFToken\", csrftoken);\n            xmlHttp.send();\n        },\n\n        render: function() {\n            if (!this.state.visible) {\n                return React.createElement(\"li\", {});\n            }\n\n            var deleteButton;\n            if (!this.state.deleting) {\n                var buttonStyle = {cursor: 'pointer'};\n                deleteButton = React.createElement(\"i\", {\n                    className: 'fa fa-times help-block-error',\n                    style: buttonStyle,\n                    onClick: this.handleDelete\n                });\n            } else {\n                deleteButton = React.createElement(\"i\", {className: 'fa fa-spinner fa-spin'});\n            }\n\n            if (this.props.employment.is_approved) {\n                var groupName = React.createElement(\"i\", null, '(', this.props.employment.group.name.slice(0, -1), ')');\n                var employmentNode = React.createElement(\"li\", {}, this.props.employment.organisation_full.name, ' ', groupName, ' ', deleteButton);\n                return React.createElement(\"b\", null, employmentNode);\n            } else {\n                var notApproved = React.createElement(\"i\", null, '(', i18n.not_approved_text, ')');\n                return React.createElement(\"li\", {}, this.props.employment.organisation_full.name, ' ', notApproved, ' ', deleteButton);\n            }\n\n        }\n    });\n\n\n    var EmploymentList = React.createClass({\n        render: function() {\n            var thisEmploymentList = this;\n            var employments = this.props.employments.map(function(job) {\n                return React.createElement(Employment, {key: job.id, employment: job, removeEmployment: thisEmploymentList.props.removeEmployment});\n            });\n\n            return React.createElement(\"ul\", null, employments);\n        }\n    });\n\n    var OrganisationInput = React.createClass({\n        typeaheadCallback: function(option) {\n            document.getElementById('organisationInput').setAttribute('value', option.id);\n        },\n\n        render: function() {\n            var inputProps = {id: 'organisationInput'};\n            if (this.props.loading) {\n                inputProps.disabled = true;\n            }\n            var orgTypeahead = React.createElement(Typeahead, {\n                placeholder: i18n.organisation_text,\n                maxVisible: 10,\n                options: organisations,\n                onOptionSelected: this.typeaheadCallback,\n                displayOption: 'displayOption',\n                filterOption: 'filterOption',\n                customClasses: {input: 'form-control'},\n                inputProps: inputProps\n            });\n            var div = React.createFactory('div');\n            var formGroupClass = this.props.orgError ? 'form-group has-error' : 'form-group';\n            return div({className: formGroupClass}, orgTypeahead);\n        }\n    });\n\n    var ErrorNode = React.createClass({\n        render: function() {\n            if (this.props.visible) {\n                return React.createElement(\"div\", {className: 'help-block-error'}, '* ' + this.props.errorText);\n            } else {\n                return React.createElement(\"span\");\n            }\n        }\n    });\n\n    var CountryInput = React.createClass({\n        typeaheadCallback: function(option) {\n            document.getElementById('countryInput').setAttribute('value', option.code);\n        },\n\n        render: function() {\n            var inputProps = {id: 'countryInput'};\n            if (this.props.loading) {\n                inputProps.disabled = true;\n            }\n            var countryTypeahead = React.createElement(Typeahead, {\n                placeholder: i18n.country_text,\n                maxVisible: 5,\n                options: countries,\n                onOptionSelected: this.typeaheadCallback,\n                displayOption: 'name',\n                filterOption: 'name',\n                customClasses: {input: 'form-control'},\n                inputProps: inputProps\n            });\n            var div = React.createFactory('div');\n            return div({className: 'form-group'}, countryTypeahead);\n        }\n    });\n\n    var JobTitleInput = React.createClass({\n        render: function() {\n            var input = React.createFactory('input');\n            var inputProps = {className: 'form-control', type: 'text', 'placeholder': i18n.job_title_text, id: \"jobtitleInput\"};\n            if (this.props.loading) {\n                inputProps.disabled = true;\n            }\n            var jobTitleInput = input(inputProps);\n            var div = React.createFactory('div');\n            return div({className: 'form-group'}, jobTitleInput);\n        }\n    });\n\n    var FormButton = React.createClass({\n        handleAddEmployment: function () {\n            this.props.addEmployment();\n        },\n\n        render: function() {\n            var loadingIcon = React.createElement(\"i\", {className: 'fa fa-spinner fa-spin'});\n            var button = React.createFactory('button');\n            if (this.props.loading) {\n                return button(\n                    {\n                        onClick: this.handleAddEmployment,\n                        className: 'btn btn-default btn-sm',\n                        type: \"button\",\n                        disabled: true\n                    },\n                    loadingIcon,\n                    ' ',\n                    i18n.sending_request_text\n                );\n            } else {\n                return button(\n                    {\n                        onClick: this.handleAddEmployment,\n                        className: 'btn btn-default btn-sm',\n                        type: \"button\"\n                    },\n                    i18n.request_join_text\n                );\n            }\n        }\n    });\n\n    var AddEmploymentForm = React.createClass({\n        getInitialState: function () {\n            return {\n                buttonText: i18n.request_join_text,\n                loading: false,\n                showError: false,\n                errorText: ''\n            };\n        },\n\n        handleAddEmployment: function (employment) {\n            this.props.addEmployment(employment);\n        },\n\n        checkExistingEmployment: function(organisationId) {\n            return this.props.existingEmployment(organisationId);\n        },\n\n        getFormData: function () {\n            var orgValue = document.getElementById('organisationInput').getAttribute('value');\n            var countryValue = document.getElementById('countryInput').getAttribute('value');\n            var jobTitleValue = document.getElementById('jobtitleInput').value;\n\n            return {\n                organisation: orgValue,\n                country: countryValue,\n                job_title: jobTitleValue\n            };\n        },\n\n        addEmployment: function () {\n            // Retrieve form data\n            var formData = this.getFormData();\n\n            // Disable button and form\n            this.setState({\n                loading: true,\n                showError: false,\n                errorText: ''\n            });\n\n            // Check if organisation is filled in\n            if (formData.organisation === '') {\n                this.setState({\n                    loading: false,\n                    showError: true,\n                    errorText: i18n.required_text\n                });\n                return false;\n            }\n\n            // Check if organisation is a valid Integer and if an employment with that organisation\n            // already exists\n            try {\n                var organisationId = parseInt(formData.organisation);\n                if (this.checkExistingEmployment(organisationId)) {\n                    this.setState({\n                        loading: false,\n                        showError: true,\n                        errorText: i18n.already_connected_text\n                    });\n                    return false;\n                }\n            } catch (err) {\n                this.setState({\n                    loading: false,\n                    showError: true,\n                    errorText: i18n.not_connected_text\n                });\n                return false;\n            }\n\n            // POST a new employment record\n            var xmlHttp = new XMLHttpRequest();\n            var thisForm = this;\n            xmlHttp.onreadystatechange = function() {\n                if (xmlHttp.readyState == XMLHttpRequest.DONE) {\n                    thisForm.setState({loading: false});\n                    if (xmlHttp.status == 200){\n                        thisForm.setState({loading: false, showError: false, errorText: ''});\n                        var response = JSON.parse(xmlHttp.responseText);\n                        thisForm.handleAddEmployment(response);\n                        return false;\n                    } else if (xmlHttp.status == 409) {\n                        thisForm.setState({\n                            loading: false,\n                            showError: true,\n                            errorText: i18n.already_connected_text\n                        });\n                        return false;\n                    } else {\n                        thisForm.setState({\n                            loading: false,\n                            showError: true,\n                            errorText: i18n.not_connected_text\n                        });\n                        return false;\n                    }\n                }\n            };\n            xmlHttp.open(\"POST\", this.props.link + \"?format=json\", true);\n            xmlHttp.setRequestHeader(\"X-CSRFToken\", csrftoken);\n            xmlHttp.setRequestHeader(\"Content-type\", \"application/json; charset=UTF-8\");\n            xmlHttp.send(JSON.stringify(formData));\n        },\n\n        render: function() {\n            var heading = React.createElement(\"h4\", null, i18n.connect_employer_text);\n            var errorMessage = React.createElement(ErrorNode, {visible: this.state.showError, errorText: this.state.errorText});\n            var orgInput = React.createElement(OrganisationInput, {orgError: this.state.showError, loading: this.state.loading});\n            var countryInput = React.createElement(CountryInput, {loading: this.state.loading});\n            var jobTitleInput = React.createElement(JobTitleInput, {loading: this.state.loading});\n            var formButton = React.createElement(FormButton, {addEmployment: this.addEmployment, loading: this.state.loading});\n            var form = React.createElement(\"form\", null, errorMessage, orgInput, countryInput, jobTitleInput, formButton);\n            return React.createElement(\"span\", null, heading, form);\n        }\n\n    });\n\n    var EmploymentApp = React.createClass({\n        getInitialState: function() {\n            return {employments: []};\n        },\n\n        componentDidMount: function() {\n            if (this.isMounted()) {\n                this.setState(\n                    {employments: this.props.employments}\n                );\n            }\n        },\n\n        existingEmployment: function(organisationId) {\n            for (var i=0; i < this.state.employments.length; i++) {\n                if (this.state.employments[i].organisation_full.id === organisationId &&\n                    this.state.employments[i].group.name === 'Users') {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        addEmployment: function(employment) {\n            this.setState(\n                {employments: this.state.employments.concat([employment])}\n            );\n        },\n\n        removeEmployment: function(employmentId) {\n            for (var i=0; i < this.state.employments.length; i++) {\n                if (this.state.employments[i].id === employmentId) {\n                    var employments = this.state.employments;\n                    employments.splice(i, 1);\n                    this.setState({employments: employments});\n                    break;\n                }\n            }\n        },\n\n        render: function() {\n            var icon = React.createFactory(\"i\");\n            var headingIcon = icon({className: 'fa fa-users'});\n            var heading = React.createElement(\"h4\", null, ' ', i18n.my_organisations_text);\n            var employmentList = React.createElement(EmploymentList, {employments: this.state.employments, removeEmployment: this.removeEmployment});\n            var addEmploymentForm = React.createElement(AddEmploymentForm, {link: this.props.link, org_link: this.props.org_link, country_link: this.props.country_link, addEmployment: this.addEmployment, existingEmployment: this.existingEmployment});\n            return React.createElement(\"span\", null, heading, employmentList, addEmploymentForm);\n        }\n    });\n\n    ReactDOM.render(\n        React.createElement(\n            EmploymentApp,\n            {\n                employments: initial_data.user.employments,\n                link: request_link.link,\n                org_link: request_link.org_rest_link,\n                country_link: request_link.country_rest_link\n            }\n        ),\n        document.getElementById('organisations')\n    );\n}\n\n/* Process organisations results */\nfunction processOrgs(orgResults) {\n    function getDisplayOption(short, long) {\n        if (short === long) {\n            return short;\n        }\n        if (!long) {\n            return short;\n        }\n        return short + ' (' + long + ')';\n    }\n\n    organisations = orgResults;\n    organisations.forEach(function (o) {\n        var newName = getDisplayOption(o.name, o.long_name);\n\n        o.filterOption = o.name + ' ' + o.long_name;\n        o.displayOption = newName;\n    });\n}\n\n/* Retrieve all organisations and countries for the typeaheads */\nfunction getOrgsandCountries() {\n    // KB: Nasty implementation with nested API calls\n    var xmlHttpOrgs = new XMLHttpRequest();\n    xmlHttpOrgs.onreadystatechange = function() {\n        // Get organisations first\n        if (xmlHttpOrgs.readyState == XMLHttpRequest.DONE && xmlHttpOrgs.status == 200) {\n            var orgResult = JSON.parse(xmlHttpOrgs.responseText);\n            processOrgs(orgResult.results);\n            var xmlHttpCountries = new XMLHttpRequest();\n            xmlHttpCountries.onreadystatechange = function() {\n                // Then get countries\n                if (xmlHttpCountries.readyState == XMLHttpRequest.DONE && xmlHttpCountries.status == 200) {\n                    var countriesResult = JSON.parse(xmlHttpCountries.responseText);\n                    countries = countriesResult.results;\n                    // Finally, build the app\n                    buildEmploymentsApp();\n                }\n            };\n            xmlHttpCountries.open(\"GET\", countriesAPIUrl, true);\n            xmlHttpCountries.send();\n        }\n    };\n    xmlHttpOrgs.open(\"GET\", orgsAPIUrl, true);\n    xmlHttpOrgs.send();\n}\n\n/* Get initial data from HTML and store in global variables */\nfunction getInitialData() {\n    initial_data = JSON.parse(document.getElementById(\"initial-data\").innerHTML);\n    request_link = JSON.parse(document.getElementById(\"user-request-link\").innerHTML);\n    i18n = JSON.parse(document.getElementById(\"my-details-text\").innerHTML);\n}\n\nvar loadJS = function(url, implementationCode, location){\n    //url is URL of external file, implementationCode is the code\n    //to be called from the file, location is the location to\n    //insert the <script> element\n\n    var scriptTag = document.createElement('script');\n    scriptTag.src = url;\n\n    scriptTag.onload = implementationCode;\n    scriptTag.onreadystatechange = implementationCode;\n\n    location.appendChild(scriptTag);\n};\n\nfunction loadAndRenderReact() {\n    function loadReactTypeahead() {\n        var reactTypeaheadSrc = document.getElementById('react-typeahead').src;\n        loadJS(reactTypeaheadSrc, getOrgsandCountries, document.body);\n    }\n\n    function loadReactDOM() {\n        var reactDOMSrc = document.getElementById('react-dom').src;\n        loadJS(reactDOMSrc, loadReactTypeahead, document.body);\n    }\n\n    console.log('No React, load again.');\n    var reactSrc = document.getElementById('react').src;\n    loadJS(reactSrc, loadReactDOM, document.body);\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    getInitialData();\n\n    // Check if React is loaded\n    if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined' && typeof ReactTypeahead !== 'undefined') {\n        getOrgsandCountries();\n    } else {\n        loadAndRenderReact();\n    }\n});\n"],"sourceRoot":""}