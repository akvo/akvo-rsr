# RSR Hybrid Memory Monitoring Environment Variables Template
# Copy this file to .env or integrate into your deployment configuration

# ================================================================================
# CORE MEMORY MONITORING SETTINGS
# ================================================================================

# Enable/disable memory monitoring system (default: true)
RSR_MEMORY_MONITORING_ENABLED=true

# Enable detailed memory tracking (only for development/debugging, default: false)
# WARNING: Detailed tracking can impact performance and should not be used in production
RSR_MEMORY_DETAILED_TRACKING=false

# Header prefix for memory monitoring information in HTTP responses (default: X-RSR-Memory)
RSR_MEMORY_HEADER_PREFIX=X-RSR-Memory

# Interval in seconds for updating memory metrics (default: 300 = 5 minutes)
RSR_MEMORY_METRICS_UPDATE_INTERVAL=300

# Memory usage threshold in MB for high usage alerts (default: 50.0)
RSR_MEMORY_HIGH_USAGE_THRESHOLD_MB=50.0

# ================================================================================
# CACHE METRICS SETTINGS
# ================================================================================

# Enable cache metrics collection (default: true)
RSR_CACHE_METRICS_ENABLED=true

# Frequency in seconds for updating cache metrics (default: 60 = 1 minute)
RSR_CACHE_METRICS_UPDATE_FREQUENCY=60

# ================================================================================
# MEMORY LEAK DETECTION SETTINGS
# ================================================================================

# Enable memory leak detection (default: true)
RSR_LEAK_DETECTION_ENABLED=true

# Interval in seconds between leak detection checks (default: 300 = 5 minutes)
RSR_LEAK_CHECK_INTERVAL=300

# Memory growth threshold (0.2 = 20% growth triggers leak indicator, default: 0.2)
RSR_LEAK_GROWTH_THRESHOLD=0.2

# Memory threshold in MB above which to check for leaks (default: 100.0)
RSR_LEAK_MEMORY_THRESHOLD_MB=100.0

# Model instance growth threshold (1.0 = 100% growth triggers leak indicator, default: 1.0)
RSR_LEAK_MODEL_GROWTH_THRESHOLD=1.0

# ================================================================================
# DEEP MEMORY PROFILING SETTINGS (MEMRAY)
# ================================================================================

# Enable deep memory profiling with memray (default: false)
# WARNING: Only enable when needed for debugging as it can impact performance
RSR_PROFILING_ENABLED=false

# Directory for storing memory profile files (default: /tmp/rsr_memory_profiles)
RSR_PROFILING_OUTPUT_DIR=/tmp/rsr_memory_profiles

# Maximum profile file size in MB before warning (default: 100)
RSR_MAX_PROFILE_SIZE_MB=100

# Days to keep profile files before automatic cleanup (default: 7)
RSR_PROFILING_CLEANUP_DAYS=7

# Probability (0.0-1.0) for profiling requests automatically (default: 0.01 = 1%)
# Lower values reduce performance impact but provide less profiling data
RSR_PROFILING_REQUEST_PROBABILITY=0.01

# ================================================================================
# PROMETHEUS METRICS SETTINGS
# ================================================================================

# Enable Prometheus metrics collection (default: true)
RSR_PROMETHEUS_METRICS_ENABLED=true

# ================================================================================
# PRODUCTION DEPLOYMENT RECOMMENDATIONS
# ================================================================================
#
# For production environments, recommended settings:
# - RSR_MEMORY_MONITORING_ENABLED=true
# - RSR_MEMORY_DETAILED_TRACKING=false
# - RSR_CACHE_METRICS_ENABLED=true
# - RSR_LEAK_DETECTION_ENABLED=true
# - RSR_PROFILING_ENABLED=false
# - RSR_PROMETHEUS_METRICS_ENABLED=true
#
# For development/debugging environments:
# - RSR_MEMORY_DETAILED_TRACKING=true
# - RSR_PROFILING_ENABLED=true
# - RSR_PROFILING_REQUEST_PROBABILITY=0.1 (higher for more data)
#
# For performance testing environments:
# - All monitoring can be enabled to measure impact
# - Use RSR_PROFILING_ENABLED=true for deep analysis
#
# ================================================================================